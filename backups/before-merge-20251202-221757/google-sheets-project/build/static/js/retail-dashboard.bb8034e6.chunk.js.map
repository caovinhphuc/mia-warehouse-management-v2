{"version":3,"file":"static/js/retail-dashboard.bb8034e6.chunk.js","mappings":"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","sources":["services/retailService.js","components/custom/MIARetailDashboard.jsx"],"sourcesContent":["/**\n * üõí MIA Retail Service\n *\n * Service layer for retail API calls\n */\n\nconst API_BASE_URL =\n  import.meta.env.VITE_API_URL ||\n  import.meta.env.REACT_APP_API_URL ||\n  \"http://localhost:3001\";\n\n/**\n * Fetch retail dashboard summary\n */\nexport const fetchRetailDashboard = async () => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/api/retail/dashboard`);\n    if (!response.ok) {\n      throw new Error(\"Failed to fetch retail dashboard\");\n    }\n    const data = await response.json();\n    return data.success ? data.data : null;\n  } catch (error) {\n    console.error(\"Error fetching retail dashboard:\", error);\n    throw error;\n  }\n};\n\n/**\n * Fetch sales metrics\n */\nexport const fetchSalesMetrics = async (timeframe = \"30d\") => {\n  try {\n    const response = await fetch(\n      `${API_BASE_URL}/api/retail/sales?timeframe=${timeframe}`,\n    );\n    if (!response.ok) {\n      throw new Error(\"Failed to fetch sales metrics\");\n    }\n    const data = await response.json();\n    return data.success ? data.data : null;\n  } catch (error) {\n    console.error(\"Error fetching sales metrics:\", error);\n    throw error;\n  }\n};\n\n/**\n * Fetch inventory status\n */\nexport const fetchInventoryStatus = async () => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/api/retail/inventory`);\n    if (!response.ok) {\n      throw new Error(\"Failed to fetch inventory status\");\n    }\n    const data = await response.json();\n    return data.success ? data.data : null;\n  } catch (error) {\n    console.error(\"Error fetching inventory status:\", error);\n    throw error;\n  }\n};\n\n/**\n * Fetch customer analytics\n */\nexport const fetchCustomerAnalytics = async (timeframe = \"30d\") => {\n  try {\n    const response = await fetch(\n      `${API_BASE_URL}/api/retail/customers?timeframe=${timeframe}`,\n    );\n    if (!response.ok) {\n      throw new Error(\"Failed to fetch customer analytics\");\n    }\n    const data = await response.json();\n    return data.success ? data.data : null;\n  } catch (error) {\n    console.error(\"Error fetching customer analytics:\", error);\n    throw error;\n  }\n};\n\n/**\n * Fetch store performance\n */\nexport const fetchStorePerformance = async () => {\n  try {\n    const response = await fetch(`${API_BASE_URL}/api/retail/stores`);\n    if (!response.ok) {\n      throw new Error(\"Failed to fetch store performance\");\n    }\n    const data = await response.json();\n    return data.success ? data.data : null;\n  } catch (error) {\n    console.error(\"Error fetching store performance:\", error);\n    throw error;\n  }\n};\n\n/**\n * Fetch product performance\n */\nexport const fetchProductPerformance = async (\n  category = null,\n  timeframe = \"30d\",\n) => {\n  try {\n    let url = `${API_BASE_URL}/api/retail/products?timeframe=${timeframe}`;\n    if (category) {\n      url += `&category=${category}`;\n    }\n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(\"Failed to fetch product performance\");\n    }\n    const data = await response.json();\n    return data.success ? data.data : null;\n  } catch (error) {\n    console.error(\"Error fetching product performance:\", error);\n    throw error;\n  }\n};\n\n/**\n * Format currency for Vietnamese Dong\n */\nexport const formatVND = (amount) => {\n  return new Intl.NumberFormat(\"vi-VN\", {\n    style: \"currency\",\n    currency: \"VND\",\n  }).format(amount);\n};\n\n/**\n * Format number with Vietnamese locale\n */\nexport const formatNumber = (number) => {\n  return new Intl.NumberFormat(\"vi-VN\").format(number);\n};\n\n/**\n * Calculate growth percentage\n */\nexport const calculateGrowth = (current, previous) => {\n  if (!previous || previous === 0) return 0;\n  return ((current - previous) / previous) * 100;\n};\n\n/**\n * Get status color based on value\n */\nexport const getStatusColor = (\n  value,\n  thresholds = { good: 0.8, excellent: 1.2 },\n) => {\n  if (value >= thresholds.excellent) return \"#06a77d\"; // Green - Excellent\n  if (value >= thresholds.good) return \"#3b82f6\"; // Blue - Good\n  if (value >= 0.5) return \"#f59e0b\"; // Orange - Average\n  return \"#d62828\"; // Red - Poor\n};\n\nexport default {\n  fetchRetailDashboard,\n  fetchSalesMetrics,\n  fetchInventoryStatus,\n  fetchCustomerAnalytics,\n  fetchStorePerformance,\n  fetchProductPerformance,\n  formatVND,\n  formatNumber,\n  calculateGrowth,\n  getStatusColor,\n};\n","/**\n * üõí MIA Retail Dashboard Widget\n *\n * Retail-specific dashboard widget for MIA Retail analytics platform.\n * Displays sales, inventory, customer, and store performance metrics.\n */\n\nimport React, { useState, useEffect } from \"react\";\nimport { Card, Typography, Spin, Alert, Row, Col, Tag, Space } from \"antd\";\nimport { Line, Bar, Pie } from \"react-chartjs-2\";\nimport {\n  fetchRetailDashboard,\n  fetchSalesMetrics,\n  fetchInventoryStatus,\n  fetchCustomerAnalytics,\n  formatVND,\n  formatNumber,\n} from \"../../services/retailService\";\nimport {\n  Chart as ChartJS,\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  BarElement,\n  ArcElement,\n  Title,\n  Tooltip,\n  Legend,\n} from \"chart.js\";\n\n// Register Chart.js components\nChartJS.register(\n  CategoryScale,\n  LinearScale,\n  PointElement,\n  LineElement,\n  BarElement,\n  ArcElement,\n  Title,\n  Tooltip,\n  Legend,\n);\n\nconst MIARetailDashboard = () => {\n  const [dashboardData, setDashboardData] = useState(null);\n  const [salesData, setSalesData] = useState(null);\n  const [inventoryData, setInventoryData] = useState(null);\n  const [customerData, setCustomerData] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n\n  useEffect(() => {\n    fetchRetailData();\n    // Refresh every 30 seconds\n    const interval = setInterval(fetchRetailData, 30000);\n    return () => clearInterval(interval);\n  }, []);\n\n  const fetchRetailData = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const [dashboard, sales, inventory, customers] = await Promise.all([\n        fetchRetailDashboard(),\n        fetchSalesMetrics(\"30d\"),\n        fetchInventoryStatus(),\n        fetchCustomerAnalytics(\"30d\"),\n      ]);\n\n      if (dashboard) setDashboardData(dashboard);\n      if (sales) setSalesData(sales);\n      if (inventory) setInventoryData(inventory);\n      if (customers) setCustomerData(customers);\n    } catch (err) {\n      // eslint-disable-next-line no-console\n      console.error(\"Error fetching retail data:\", err);\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Sales trend chart data\n  const salesChartData = {\n    labels: [\"Mon\", \"Tue\", \"Wed\", \"Thu\", \"Fri\", \"Sat\", \"Sun\"],\n    datasets: [\n      {\n        label: \"Revenue (VND)\",\n        data: [120000, 150000, 180000, 140000, 160000, 200000, 220000],\n        borderColor: \"#3b82f6\",\n        backgroundColor: \"rgba(59, 130, 246, 0.1)\",\n        tension: 0.4,\n      },\n    ],\n  };\n\n  // Top products chart\n  const topProductsData = salesData?.topProducts\n    ? {\n        labels: salesData.topProducts.map((p) => p.name),\n        datasets: [\n          {\n            label: \"Sales (VND)\",\n            data: salesData.topProducts.map((p) => p.sales),\n            backgroundColor: [\n              \"#3b82f6\",\n              \"#60a5fa\",\n              \"#2563eb\",\n              \"#06a77d\",\n              \"#1d4ed8\",\n            ],\n          },\n        ],\n      }\n    : null;\n\n  // Inventory status pie chart\n  const inventoryStatusData = inventoryData\n    ? {\n        labels: [\"In Stock\", \"Low Stock\", \"Out of Stock\"],\n        datasets: [\n          {\n            data: [\n              inventoryData.inStock,\n              inventoryData.lowStock,\n              inventoryData.outOfStock,\n            ],\n            backgroundColor: [\"#06a77d\", \"#f59e0b\", \"#d62828\"],\n          },\n        ],\n      }\n    : null;\n\n  if (loading && !dashboardData) {\n    return (\n      <div\n        style={{\n          display: \"flex\",\n          justifyContent: \"center\",\n          alignItems: \"center\",\n          minHeight: \"400px\",\n        }}\n      >\n        <Spin size=\"large\" />\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <Alert\n        message=\"Error\"\n        description={`Error loading retail data: ${error}`}\n        type=\"error\"\n        showIcon\n        style={{ margin: 16 }}\n      />\n    );\n  }\n\n  return (\n    <div style={{ padding: 16 }}>\n      <Typography.Title\n        level={2}\n        style={{ marginBottom: 24, fontWeight: 700, color: \"#3b82f6\" }}\n      >\n        üõí MIA Retail Dashboard\n      </Typography.Title>\n\n      <Row gutter={[16, 16]}>\n        {/* Today's Revenue */}\n        <Col xs={24} sm={12} md={6}>\n          <Card\n            style={{\n              background: \"linear-gradient(135deg, #3b82f6 0%, #1d4ed8 100%)\",\n              color: \"white\",\n            }}\n          >\n            <Typography.Text\n              style={{\n                display: \"block\",\n                marginBottom: 8,\n                opacity: 0.9,\n                color: \"white\",\n              }}\n            >\n              Today's Revenue\n            </Typography.Text>\n            <Typography.Title\n              level={3}\n              style={{ fontWeight: 700, color: \"white\", margin: 0 }}\n            >\n              {formatVND(dashboardData?.today?.revenue || 0)}\n            </Typography.Title>\n            <Typography.Text\n              style={{\n                display: \"block\",\n                marginTop: 8,\n                opacity: 0.8,\n                color: \"white\",\n              }}\n            >\n              {dashboardData?.today?.orders || 0} orders\n            </Typography.Text>\n          </Card>\n        </Col>\n\n        {/* Total Customers */}\n        <Col xs={24} sm={12} md={6}>\n          <Card\n            style={{\n              background: \"linear-gradient(135deg, #f77f00 0%, #fcbf49 100%)\",\n              color: \"white\",\n            }}\n          >\n            <Typography.Text\n              style={{\n                display: \"block\",\n                marginBottom: 8,\n                opacity: 0.9,\n                color: \"white\",\n              }}\n            >\n              Active Customers\n            </Typography.Text>\n            <Typography.Title\n              level={3}\n              style={{ fontWeight: 700, color: \"white\", margin: 0 }}\n            >\n              {customerData?.activeCustomers?.toLocaleString() || 0}\n            </Typography.Title>\n            <Typography.Text\n              style={{\n                display: \"block\",\n                marginTop: 8,\n                opacity: 0.8,\n                color: \"white\",\n              }}\n            >\n              {customerData?.newCustomers || 0} new this month\n            </Typography.Text>\n          </Card>\n        </Col>\n\n        {/* Inventory Status */}\n        <Col xs={24} sm={12} md={6}>\n          <Card\n            style={{\n              background: \"linear-gradient(135deg, #06a77d 0%, #3b82f6 100%)\",\n              color: \"white\",\n            }}\n          >\n            <Typography.Text\n              style={{\n                display: \"block\",\n                marginBottom: 8,\n                opacity: 0.9,\n                color: \"white\",\n              }}\n            >\n              Inventory\n            </Typography.Text>\n            <Typography.Title\n              level={3}\n              style={{ fontWeight: 700, color: \"white\", margin: 0 }}\n            >\n              {inventoryData?.inStock || 0} /{\" \"}\n              {inventoryData?.totalProducts || 0}\n            </Typography.Title>\n            <Typography.Text\n              style={{\n                display: \"block\",\n                marginTop: 8,\n                opacity: 0.8,\n                color: \"white\",\n              }}\n            >\n              {inventoryData?.lowStock || 0} low stock items\n            </Typography.Text>\n          </Card>\n        </Col>\n\n        {/* Conversion Rate */}\n        <Col xs={24} sm={12} md={6}>\n          <Card\n            style={{\n              background: \"linear-gradient(135deg, #3b82f6 0%, #667eea 100%)\",\n              color: \"white\",\n            }}\n          >\n            <Typography.Text\n              style={{\n                display: \"block\",\n                marginBottom: 8,\n                opacity: 0.9,\n                color: \"white\",\n              }}\n            >\n              Conversion Rate\n            </Typography.Text>\n            <Typography.Title\n              level={3}\n              style={{ fontWeight: 700, color: \"white\", margin: 0 }}\n            >\n              {salesData?.conversionRate?.toFixed(1) || 0}%\n            </Typography.Title>\n            <Typography.Text\n              style={{\n                display: \"block\",\n                marginTop: 8,\n                opacity: 0.8,\n                color: \"white\",\n              }}\n            >\n              AOV: {salesData?.averageOrderValue?.toLocaleString(\"vi-VN\") || 0}‚Ç´\n            </Typography.Text>\n          </Card>\n        </Col>\n\n        {/* Sales Trend Chart */}\n        <Col xs={24} md={16}>\n          <Card>\n            <Typography.Title level={4} style={{ marginBottom: 16 }}>\n              üìà Sales Trend (Last 7 Days)\n            </Typography.Title>\n            <div style={{ height: \"300px\" }}>\n              <Line\n                data={salesChartData}\n                options={{\n                  responsive: true,\n                  maintainAspectRatio: false,\n                  plugins: {\n                    legend: { display: true },\n                    tooltip: {\n                      callbacks: {\n                        label: function (context) {\n                          return (\n                            \"Revenue: \" +\n                            context.parsed.y.toLocaleString(\"vi-VN\") +\n                            \"‚Ç´\"\n                          );\n                        },\n                      },\n                    },\n                  },\n                  scales: {\n                    y: {\n                      beginAtZero: true,\n                      ticks: {\n                        callback: function (value) {\n                          return value.toLocaleString(\"vi-VN\") + \"‚Ç´\";\n                        },\n                      },\n                    },\n                  },\n                }}\n              />\n            </div>\n          </Card>\n        </Col>\n\n        {/* Inventory Status Pie */}\n        <Col xs={24} md={8}>\n          <Card>\n            <Typography.Title level={4} style={{ marginBottom: 16 }}>\n              üì¶ Inventory Status\n            </Typography.Title>\n            {inventoryStatusData && (\n              <div style={{ height: \"300px\" }}>\n                <Pie\n                  data={inventoryStatusData}\n                  options={{\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    plugins: {\n                      legend: { position: \"bottom\" },\n                    },\n                  }}\n                />\n              </div>\n            )}\n          </Card>\n        </Col>\n\n        {/* Top Products */}\n        <Col xs={24} md={12}>\n          <Card>\n            <Typography.Title level={4} style={{ marginBottom: 16 }}>\n              üèÜ Top Selling Products\n            </Typography.Title>\n            {topProductsData && (\n              <div style={{ height: \"300px\" }}>\n                <Bar\n                  data={topProductsData}\n                  options={{\n                    responsive: true,\n                    maintainAspectRatio: false,\n                    plugins: {\n                      legend: { display: false },\n                      tooltip: {\n                        callbacks: {\n                          label: function (context) {\n                            return (\n                              \"Sales: \" +\n                              context.parsed.y.toLocaleString(\"vi-VN\") +\n                              \"‚Ç´\"\n                            );\n                          },\n                        },\n                      },\n                    },\n                    scales: {\n                      y: {\n                        beginAtZero: true,\n                        ticks: {\n                          callback: function (value) {\n                            return value.toLocaleString(\"vi-VN\") + \"‚Ç´\";\n                          },\n                        },\n                      },\n                    },\n                  }}\n                />\n              </div>\n            )}\n          </Card>\n        </Col>\n\n        {/* Customer Metrics */}\n        <Col xs={24} md={12}>\n          <Card>\n            <Typography.Title level={4} style={{ marginBottom: 16 }}>\n              üë• Customer Metrics\n            </Typography.Title>\n            <Space direction=\"vertical\" size=\"middle\" style={{ width: \"100%\" }}>\n              <div\n                style={{\n                  display: \"flex\",\n                  justifyContent: \"space-between\",\n                  alignItems: \"center\",\n                }}\n              >\n                <Typography.Text>Total Customers</Typography.Text>\n                <Tag color=\"blue\">\n                  {customerData?.totalCustomers?.toLocaleString() || 0}\n                </Tag>\n              </div>\n              <div\n                style={{\n                  display: \"flex\",\n                  justifyContent: \"space-between\",\n                  alignItems: \"center\",\n                }}\n              >\n                <Typography.Text>Retention Rate</Typography.Text>\n                <Tag color=\"green\">\n                  {`${customerData?.retentionRate?.toFixed(1) || 0}%`}\n                </Tag>\n              </div>\n              <div\n                style={{\n                  display: \"flex\",\n                  justifyContent: \"space-between\",\n                  alignItems: \"center\",\n                }}\n              >\n                <Typography.Text>Customer Lifetime Value</Typography.Text>\n                <Tag color=\"cyan\">\n                  {`${customerData?.customerLifetimeValue?.toLocaleString(\"vi-VN\") || 0}‚Ç´`}\n                </Tag>\n              </div>\n              <div\n                style={{\n                  display: \"flex\",\n                  justifyContent: \"space-between\",\n                  alignItems: \"center\",\n                }}\n              >\n                <Typography.Text>Average Order Frequency</Typography.Text>\n                <Tag color=\"orange\">\n                  {`${customerData?.averageOrderFrequency?.toFixed(1) || 0}x`}\n                </Tag>\n              </div>\n            </Space>\n          </Card>\n        </Col>\n      </Row>\n    </div>\n  );\n};\n\nexport default MIARetailDashboard;\n"],"names":["API_BASE_URL","env","VITE_API_URL","REACT_APP_API_URL","fetchRetailDashboard","async","response","fetch","concat","ok","Error","data","json","success","error","console","fetchSalesMetrics","timeframe","arguments","length","undefined","fetchInventoryStatus","fetchCustomerAnalytics","formatVND","amount","Intl","NumberFormat","style","currency","format","ChartJS","register","CategoryScale","LinearScale","PointElement","LineElement","BarElement","ArcElement","Title","Tooltip","Legend","MIARetailDashboard","_dashboardData$today","_dashboardData$today2","_customerData$activeC","_salesData$conversion","_salesData$averageOrd","_customerData$totalCu","_customerData$retenti","_customerData$custome","_customerData$average","dashboardData","setDashboardData","useState","salesData","setSalesData","inventoryData","setInventoryData","customerData","setCustomerData","loading","setLoading","setError","useEffect","fetchRetailData","interval","setInterval","clearInterval","dashboard","sales","inventory","customers","Promise","all","err","message","topProductsData","topProducts","labels","map","p","name","datasets","label","backgroundColor","inventoryStatusData","inStock","lowStock","outOfStock","_jsx","display","justifyContent","alignItems","minHeight","children","Spin","size","Alert","description","type","showIcon","margin","_jsxs","padding","Typography","level","marginBottom","fontWeight","color","Row","gutter","Col","xs","sm","md","Card","background","Text","opacity","today","revenue","marginTop","orders","activeCustomers","toLocaleString","newCustomers","totalProducts","conversionRate","toFixed","averageOrderValue","height","Line","borderColor","tension","options","responsive","maintainAspectRatio","plugins","legend","tooltip","callbacks","context","parsed","y","scales","beginAtZero","ticks","callback","value","Pie","position","Bar","Space","direction","width","Tag","totalCustomers","retentionRate","customerLifetimeValue","averageOrderFrequency"],"ignoreList":[],"sourceRoot":""}
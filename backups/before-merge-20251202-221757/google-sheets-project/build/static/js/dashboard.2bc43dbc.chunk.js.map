{"version":3,"file":"static/js/dashboard.2bc43dbc.chunk.js","mappings":"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","sources":["services/websocketService.js","hooks/useWebSocket.js","components/Dashboard/LiveDashboard.jsx"],"sourcesContent":["/* eslint-disable */\n/**\n * WebSocket Service - Frontend Socket.io Client\n * Manages real-time connections and events\n */\n\nimport { io } from \"socket.io-client\";\n\nconst API_BASE_URL =\n  import.meta.env.VITE_API_URL ||\n  import.meta.env.REACT_APP_API_URL ||\n  \"http://localhost:3001\";\n\nclass WebSocketService {\n  constructor() {\n    this.socket = null;\n    this.connected = false;\n    this.listeners = new Map();\n    this.reconnectAttempts = 0;\n    this.maxReconnectAttempts = 5;\n    this.reconnectDelay = 1000;\n  }\n\n  /**\n   * Connect to WebSocket server\n   */\n  connect(userId = null) {\n    if (this.socket && this.connected) {\n      console.log(\"âš ï¸ Already connected to WebSocket\");\n      return this.socket;\n    }\n\n    try {\n      this.socket = io(API_BASE_URL, {\n        transports: [\"websocket\", \"polling\"],\n        reconnection: true,\n        reconnectionAttempts: this.maxReconnectAttempts,\n        reconnectionDelay: this.reconnectDelay,\n        autoConnect: true,\n        withCredentials: true,\n      });\n\n      // Connection events\n      this.socket.on(\"connect\", () => {\n        console.log(\"âœ… Connected to WebSocket server:\", this.socket.id);\n        this.connected = true;\n        this.reconnectAttempts = 0;\n\n        if (userId) {\n          this.socket.emit(\"join-room\", { room: `user:${userId}`, userId });\n        }\n\n        this.emit(\"connected\", { socketId: this.socket.id });\n      });\n\n      this.socket.on(\"disconnect\", (reason) => {\n        console.log(\"âŒ Disconnected from WebSocket:\", reason);\n        this.connected = false;\n        this.emit(\"disconnected\", { reason });\n      });\n\n      this.socket.on(\"connect_error\", (error) => {\n        console.error(\"âŒ WebSocket connection error:\", error);\n        this.reconnectAttempts++;\n        this.emit(\"connection-error\", {\n          error,\n          attempt: this.reconnectAttempts,\n        });\n      });\n\n      this.socket.on(\"reconnect\", (attemptNumber) => {\n        console.log(`ðŸ”„ Reconnected after ${attemptNumber} attempts`);\n        this.emit(\"reconnected\", { attemptNumber });\n      });\n\n      // Ping/Pong for health check\n      this.socket.on(\"pong\", (data) => {\n        this.emit(\"pong\", data);\n      });\n\n      return this.socket;\n    } catch (error) {\n      console.error(\"âŒ Failed to connect to WebSocket:\", error);\n      this.emit(\"connection-error\", { error });\n      return null;\n    }\n  }\n\n  /**\n   * Disconnect from WebSocket server\n   */\n  disconnect() {\n    if (this.socket) {\n      this.socket.disconnect();\n      this.socket = null;\n      this.connected = false;\n      this.listeners.clear();\n      console.log(\"ðŸ”Œ Disconnected from WebSocket\");\n    }\n  }\n\n  /**\n   * Check if connected\n   */\n  isConnected() {\n    return this.connected && this.socket && this.socket.connected;\n  }\n\n  /**\n   * Join a room\n   */\n  joinRoom(room, userId = null) {\n    if (!this.isConnected()) {\n      console.error(\"âš ï¸ Cannot join room: not connected\");\n      return;\n    }\n    this.socket.emit(\"join-room\", { room, userId });\n  }\n\n  /**\n   * Leave a room\n   */\n  leaveRoom(room, userId = null) {\n    if (!this.isConnected()) {\n      console.error(\"âš ï¸ Cannot leave room: not connected\");\n      return;\n    }\n    this.socket.emit(\"leave-room\", { room, userId });\n  }\n\n  /**\n   * Subscribe to dashboard metrics\n   */\n  subscribeMetrics() {\n    if (!this.isConnected()) {\n      this.connect();\n    }\n    this.socket.emit(\"subscribe-metrics\");\n  }\n\n  /**\n   * Unsubscribe from dashboard metrics\n   */\n  unsubscribeMetrics() {\n    if (this.isConnected()) {\n      this.socket.emit(\"unsubscribe-metrics\");\n    }\n  }\n\n  /**\n   * Subscribe to notifications for a user\n   */\n  subscribeNotifications(userId) {\n    if (!this.isConnected()) {\n      this.connect(userId);\n    }\n    this.socket.emit(\"subscribe-notifications\", { userId });\n    this.joinRoom(`notifications:${userId}`, userId);\n  }\n\n  /**\n   * Unsubscribe from notifications\n   */\n  unsubscribeNotifications(userId) {\n    if (this.isConnected()) {\n      this.socket.emit(\"unsubscribe-notifications\", { userId });\n      this.leaveRoom(`notifications:${userId}`, userId);\n    }\n  }\n\n  /**\n   * Join Google Sheets collaborative editing room\n   */\n  joinSheetsRoom(spreadsheetId, userId = null) {\n    const room = `sheets:${spreadsheetId}`;\n    this.joinRoom(room, userId);\n  }\n\n  /**\n   * Leave Google Sheets room\n   */\n  leaveSheetsRoom(spreadsheetId, userId = null) {\n    const room = `sheets:${spreadsheetId}`;\n    this.leaveRoom(room, userId);\n  }\n\n  /**\n   * Send sheets edit event\n   */\n  sendSheetsEdit(spreadsheetId, range, value, userId = null) {\n    if (!this.isConnected()) {\n      console.error(\"âš ï¸ Cannot send sheets edit: not connected\");\n      return;\n    }\n    this.socket.emit(\"sheets-edit\", {\n      spreadsheetId,\n      range,\n      value,\n      userId,\n    });\n  }\n\n  /**\n   * Send cursor position\n   */\n  sendCursorPosition(spreadsheetId, cell, userId = null) {\n    if (!this.isConnected()) {\n      return;\n    }\n    this.socket.emit(\"sheets-cursor\", {\n      spreadsheetId,\n      cell,\n      userId,\n    });\n  }\n\n  /**\n   * Listen to an event\n   */\n  on(event, callback) {\n    if (!this.listeners.has(event)) {\n      this.listeners.set(event, []);\n    }\n    this.listeners.get(event).push(callback);\n\n    // Also set up Socket.io listener\n    if (this.socket) {\n      this.socket.on(event, callback);\n    }\n  }\n\n  /**\n   * Remove event listener\n   */\n  off(event, callback) {\n    const listeners = this.listeners.get(event);\n    if (listeners) {\n      const index = listeners.indexOf(callback);\n      if (index > -1) {\n        listeners.splice(index, 1);\n      }\n    }\n\n    if (this.socket) {\n      this.socket.off(event, callback);\n    }\n  }\n\n  /**\n   * Emit custom event to listeners\n   */\n  emit(event, data) {\n    const listeners = this.listeners.get(event);\n    if (listeners) {\n      listeners.forEach((callback) => {\n        try {\n          callback(data);\n        } catch (error) {\n          console.error(`Error in listener for ${event}:`, error);\n        }\n      });\n    }\n  }\n\n  /**\n   * Get socket ID\n   */\n  getSocketId() {\n    return this.socket ? this.socket.id : null;\n  }\n}\n\n// Create singleton instance\nexport const websocketService = new WebSocketService();\nexport default websocketService;\n","/* eslint-disable */\n/**\n * React Hook for WebSocket Connection\n * Provides easy access to WebSocket functionality\n */\n\nimport { useEffect, useState, useCallback, useRef } from \"react\";\nimport { websocketService } from \"../services/websocketService\";\n\nexport const useWebSocket = (userId = null, autoConnect = true) => {\n  const [connected, setConnected] = useState(false);\n  const [socketId, setSocketId] = useState(null);\n  const [error, setError] = useState(null);\n  const listenersRef = useRef([]);\n\n  // Connect on mount\n  useEffect(() => {\n    if (autoConnect) {\n      const socket = websocketService.connect(userId);\n\n      // Set up connection listeners\n      const onConnected = ({ socketId: id }) => {\n        setConnected(true);\n        setSocketId(id);\n        setError(null);\n      };\n\n      const onDisconnected = () => {\n        setConnected(false);\n        setSocketId(null);\n      };\n\n      const onError = ({ error: err }) => {\n        setError(err);\n        setConnected(false);\n      };\n\n      websocketService.on(\"connected\", onConnected);\n      websocketService.on(\"disconnected\", onDisconnected);\n      websocketService.on(\"connection-error\", onError);\n\n      listenersRef.current = [\n        { event: \"connected\", callback: onConnected },\n        { event: \"disconnected\", callback: onDisconnected },\n        { event: \"connection-error\", callback: onError },\n      ];\n\n      return () => {\n        // Cleanup listeners\n        listenersRef.current.forEach(({ event, callback }) => {\n          websocketService.off(event, callback);\n        });\n      };\n    }\n  }, [userId, autoConnect]);\n\n  // Disconnect on unmount\n  useEffect(() => {\n    return () => {\n      if (!autoConnect) {\n        websocketService.disconnect();\n      }\n    };\n  }, [autoConnect]);\n\n  // Subscribe to event\n  const subscribe = useCallback((event, callback) => {\n    websocketService.on(event, callback);\n    listenersRef.current.push({ event, callback });\n\n    return () => {\n      websocketService.off(event, callback);\n      const index = listenersRef.current.findIndex(\n        (l) => l.event === event && l.callback === callback,\n      );\n      if (index > -1) {\n        listenersRef.current.splice(index, 1);\n      }\n    };\n  }, []);\n\n  // Unsubscribe from event\n  const unsubscribe = useCallback((event, callback) => {\n    websocketService.off(event, callback);\n  }, []);\n\n  return {\n    connected,\n    socketId,\n    error,\n    subscribe,\n    unsubscribe,\n    websocket: websocketService,\n    connect: () => websocketService.connect(userId),\n    disconnect: () => websocketService.disconnect(),\n    isConnected: () => websocketService.isConnected(),\n  };\n};\n\nexport default useWebSocket;\n","/* eslint-disable */\n/**\n * Live Dashboard - Real-time Metrics Display\n * Shows real-time updates via WebSocket\n */\n\nimport React, { useState, useEffect } from \"react\";\nimport { Card, Row, Col, Statistic, Typography, Tag, Space, Spin } from \"antd\";\nimport {\n  DashboardOutlined,\n  UserOutlined,\n  ThunderboltOutlined,\n  DatabaseOutlined,\n} from \"@ant-design/icons\";\nimport { useWebSocket } from \"../../hooks/useWebSocket\";\nimport { websocketService } from \"../../services/websocketService\";\nimport \"./LiveDashboard.css\";\n\nconst { Title, Text } = Typography;\n\nconst LiveDashboard = () => {\n  const { connected, subscribe, unsubscribe } = useWebSocket(null, true);\n  const [metrics, setMetrics] = useState({\n    cpu: 0,\n    memory: 0,\n    activeUsers: 0,\n    timestamp: null,\n  });\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    if (!connected) return;\n\n    // Subscribe to metrics updates\n    websocketService.subscribeMetrics();\n\n    // Listen for metrics updates\n    const unsubscribeMetrics = subscribe(\"metrics-update\", (data) => {\n      setMetrics((prev) => ({\n        ...prev,\n        ...data,\n      }));\n      setLoading(false);\n    });\n\n    // Listen for connection status\n    const unsubscribeConnected = subscribe(\"connected\", () => {\n      setLoading(false);\n    });\n\n    return () => {\n      unsubscribeMetrics();\n      unsubscribeConnected();\n      websocketService.unsubscribeMetrics();\n    };\n  }, [connected, subscribe]);\n\n  return (\n    <div className=\"live-dashboard\">\n      <div className=\"dashboard-header\">\n        <Title level={2}>\n          <DashboardOutlined /> Live Dashboard\n        </Title>\n        <Space>\n          <Tag color={connected ? \"green\" : \"red\"}>\n            {connected ? \"ðŸŸ¢ Connected\" : \"ðŸ”´ Disconnected\"}\n          </Tag>\n          <Text type=\"secondary\">Real-time metrics updates</Text>\n        </Space>\n      </div>\n\n      {loading && !connected ? (\n        <div className=\"loading-container\">\n          <Spin size=\"large\" />\n          <Text>Connecting to WebSocket server...</Text>\n        </div>\n      ) : (\n        <Row gutter={[16, 16]}>\n          {/* CPU Usage */}\n          <Col xs={24} sm={12} md={6}>\n            <Card>\n              <Statistic\n                title=\"CPU Usage\"\n                value={metrics.cpu}\n                precision={1}\n                suffix=\"%\"\n                prefix={<ThunderboltOutlined />}\n                valueStyle={{\n                  color:\n                    metrics.cpu > 80\n                      ? \"#cf1322\"\n                      : metrics.cpu > 50\n                        ? \"#faad14\"\n                        : \"#3f8600\",\n                }}\n              />\n              <div className=\"metric-bar\">\n                <div\n                  className=\"metric-bar-fill\"\n                  style={{\n                    width: `${metrics.cpu}%`,\n                    backgroundColor:\n                      metrics.cpu > 80\n                        ? \"#cf1322\"\n                        : metrics.cpu > 50\n                          ? \"#faad14\"\n                          : \"#3f8600\",\n                  }}\n                />\n              </div>\n            </Card>\n          </Col>\n\n          {/* Memory Usage */}\n          <Col xs={24} sm={12} md={6}>\n            <Card>\n              <Statistic\n                title=\"Memory Usage\"\n                value={metrics.memory}\n                precision={1}\n                suffix=\"%\"\n                prefix={<DatabaseOutlined />}\n                valueStyle={{\n                  color:\n                    metrics.memory > 80\n                      ? \"#cf1322\"\n                      : metrics.memory > 50\n                        ? \"#faad14\"\n                        : \"#3f8600\",\n                }}\n              />\n              <div className=\"metric-bar\">\n                <div\n                  className=\"metric-bar-fill\"\n                  style={{\n                    width: `${metrics.memory}%`,\n                    backgroundColor:\n                      metrics.memory > 80\n                        ? \"#cf1322\"\n                        : metrics.memory > 50\n                          ? \"#faad14\"\n                          : \"#3f8600\",\n                  }}\n                />\n              </div>\n            </Card>\n          </Col>\n\n          {/* Active Users */}\n          <Col xs={24} sm={12} md={6}>\n            <Card>\n              <Statistic\n                title=\"Active Users\"\n                value={metrics.activeUsers || 0}\n                prefix={<UserOutlined />}\n                valueStyle={{ color: \"#1890ff\" }}\n              />\n              <Text type=\"secondary\" style={{ fontSize: 12 }}>\n                WebSocket connections\n              </Text>\n            </Card>\n          </Col>\n\n          {/* Connection Status */}\n          <Col xs={24} sm={12} md={6}>\n            <Card>\n              <Statistic\n                title=\"Status\"\n                value={connected ? \"Online\" : \"Offline\"}\n                prefix={connected ? \"ðŸŸ¢\" : \"ðŸ”´\"}\n                valueStyle={{\n                  color: connected ? \"#3f8600\" : \"#cf1322\",\n                }}\n              />\n              {metrics.timestamp && (\n                <Text type=\"secondary\" style={{ fontSize: 12 }}>\n                  Last update:{\" \"}\n                  {new Date(metrics.timestamp).toLocaleTimeString(\"vi-VN\")}\n                </Text>\n              )}\n            </Card>\n          </Col>\n        </Row>\n      )}\n\n      {/* Metrics History (simple visual) */}\n      <Row gutter={[16, 16]} style={{ marginTop: 24 }}>\n        <Col xs={24} md={12}>\n          <Card title=\"CPU Usage History\">\n            <div className=\"metrics-history\">\n              <Text type=\"secondary\">\n                Real-time CPU usage tracking\n                <br />\n                Updates every 5 seconds via WebSocket\n              </Text>\n            </div>\n          </Card>\n        </Col>\n        <Col xs={24} md={12}>\n          <Card title=\"Memory Usage History\">\n            <div className=\"metrics-history\">\n              <Text type=\"secondary\">\n                Real-time memory usage tracking\n                <br />\n                Updates every 5 seconds via WebSocket\n              </Text>\n            </div>\n          </Card>\n        </Col>\n      </Row>\n    </div>\n  );\n};\n\nexport default LiveDashboard;\n"],"names":["API_BASE_URL","env","VITE_API_URL","REACT_APP_API_URL","websocketService","constructor","this","socket","connected","listeners","Map","reconnectAttempts","maxReconnectAttempts","reconnectDelay","connect","userId","arguments","length","undefined","console","log","io","transports","reconnection","reconnectionAttempts","reconnectionDelay","autoConnect","withCredentials","on","id","emit","room","concat","socketId","reason","error","attempt","attemptNumber","data","disconnect","clear","isConnected","joinRoom","leaveRoom","subscribeMetrics","unsubscribeMetrics","subscribeNotifications","unsubscribeNotifications","joinSheetsRoom","spreadsheetId","leaveSheetsRoom","sendSheetsEdit","range","value","sendCursorPosition","cell","event","callback","has","set","get","push","off","index","indexOf","splice","forEach","getSocketId","useWebSocket","setConnected","useState","setSocketId","setError","listenersRef","useRef","useEffect","onConnected","_ref","onDisconnected","onError","_ref2","err","current","_ref3","subscribe","useCallback","findIndex","l","unsubscribe","websocket","Title","Text","Typography","LiveDashboard","metrics","setMetrics","cpu","memory","activeUsers","timestamp","loading","setLoading","prev","_objectSpread","unsubscribeConnected","_jsxs","className","children","level","_jsx","DashboardOutlined","Space","Tag","color","type","Spin","size","Row","gutter","Col","xs","sm","md","Card","Statistic","title","precision","suffix","prefix","ThunderboltOutlined","valueStyle","style","width","backgroundColor","DatabaseOutlined","UserOutlined","fontSize","Date","toLocaleTimeString","marginTop"],"ignoreList":[],"sourceRoot":""}
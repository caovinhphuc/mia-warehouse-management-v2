"use strict";(self.webpackChunkreact_google_sheets_project=self.webpackChunkreact_google_sheets_project||[]).push([[146],{64937:(e,s,t)=>{t.r(s),t.d(s,{default:()=>y});var a=t(65043),n=t(5137),i=t(41180),l=t(82291),c=t(87734),r=t(52185),o=t(6026),h=t(80379),d=t(10023),m=t(877),g=t(35963),x=t(58021);const u="/api/ai";const p=new class{async analyzeData(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"7d";try{const t=await fetch("".concat(u,"/analyze"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e,timeframe:s})});if(!t.ok)throw new Error("AI analysis failed: ".concat(t.statusText));return await t.json()}catch(t){throw console.error("Error analyzing data:",t),t}}async getPredictions(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"7d";try{const t=await fetch("".concat(u,"/predict"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({metrics:e,timeframe:s})});if(!t.ok)throw new Error("Prediction failed: ".concat(t.statusText));return await t.json()}catch(t){throw console.error("Error getting predictions:",t),t}}async detectAnomalies(e){try{const s=await fetch("".concat(u,"/anomalies"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({data:e})});if(!s.ok)throw new Error("Anomaly detection failed: ".concat(s.statusText));return await s.json()}catch(s){throw console.error("Error detecting anomalies:",s),s}}async getRecommendations(e){try{const s=await fetch("".concat(u,"/recommendations"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({context:e})});if(!s.ok)throw new Error("Recommendations failed: ".concat(s.statusText));return await s.json()}catch(s){throw console.error("Error getting recommendations:",s),s}}async chat(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{const t=await fetch("".concat(u,"/chat"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,context:s})});if(!t.ok)throw new Error("AI chat failed: ".concat(t.statusText));return await t.json()}catch(t){throw console.error("Error in AI chat:",t),t}}async analyzeSheets(e){try{const s=await fetch("".concat(u,"/analyze-sheets"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sheetData:e})});if(!s.ok)throw new Error("Sheets analysis failed: ".concat(s.statusText));return await s.json()}catch(s){throw console.error("Error analyzing sheets:",s),s}}async analyzeDrive(e){try{const s=await fetch("".concat(u,"/analyze-drive"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({driveData:e})});if(!s.ok)throw new Error("Drive analysis failed: ".concat(s.statusText));return await s.json()}catch(s){throw console.error("Error analyzing drive:",s),s}}async optimizeSystem(e){try{const s=await fetch("".concat(u,"/optimize"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({systemMetrics:e})});if(!s.ok)throw new Error("System optimization failed: ".concat(s.statusText));return await s.json()}catch(s){throw console.error("Error optimizing system:",s),s}}};var j=t(70579);const y=()=>{var e,s,t,u,y,v,f,N,b,w,k,S,T,A;const{sheets:C}=(0,n.d4)(e=>e.sheets),{files:I}=(0,n.d4)(e=>e.drive),{alerts:E}=(0,n.d4)(e=>e.alerts),[M,O]=(0,a.useState)([]),[D,P]=(0,a.useState)({}),[z,K]=(0,a.useState)([]),[W,F]=(0,a.useState)(!1),[J,G]=(0,a.useState)("7d"),[_,H]=(0,a.useState)(null),[R,X]=(0,a.useState)([]),[q,B]=(0,a.useState)([]),[V,L]=(0,a.useState)(!1),[Q,U]=(0,a.useState)([]),[Y,Z]=(0,a.useState)(""),[$,ee]=(0,a.useState)(!1),[se,te]=(0,a.useState)(!1),ae=(0,a.useCallback)(async()=>{F(!0),H(null);try{const e={sheets:C.length,files:I.length,alerts:E.length,timestamp:(new Date).toISOString()},[s,t,a]=await Promise.all([p.analyzeData(e,J),p.getPredictions({sheets:C.length,files:I.length,alerts:E.length},J),p.getRecommendations({sheets:C.length,files:I.length,alerts:E.length})]);if(O(s.insights||[]),P(t.predictions||{}),K(a.recommendations||[]),t.predictions){const e={sheets:C.length,files:I.length,alerts:E.length},s=t.predictions.nextWeek||{},a=t.predictions.nextMonth||{};X([{period:"Hi\u1ec7n t\u1ea1i",sheets:e.sheets,files:e.files,alerts:e.alerts},{period:"Tu\u1ea7n t\u1edbi",sheets:s.sheets||0,files:s.files||0,alerts:s.alerts||0},{period:"Th\xe1ng t\u1edbi",sheets:a.sheets||0,files:a.files||0,alerts:a.alerts||0}]);const n=[],i=["T2","T3","T4","T5","T6","T7","CN"];for(let t=0;t<7;t++){const s=1+t/7*.15;n.push({day:i[t],sheets:Math.round(e.sheets*s),files:Math.round(e.files*s*.9),alerts:Math.max(0,Math.round(e.alerts*(1-.05*t)))})}B(n)}}catch(e){console.error("AI Analysis Error:",e),H("Kh\xf4ng th\u1ec3 ph\xe2n t\xedch d\u1eef li\u1ec7u. Vui l\xf2ng th\u1eed l\u1ea1i.");const s=[{id:1,type:"trend",title:"\ud83d\udcc8 Xu h\u01b0\u1edbng t\u0103ng tr\u01b0\u1edfng",description:"D\u1eef li\u1ec7u Google Sheets t\u0103ng 23% trong 7 ng\xe0y qua",confidence:.87,impact:"high",action:"T\u0103ng c\u01b0\u1eddng backup v\xe0 monitoring"},{id:2,type:"anomaly",title:"\u26a0\ufe0f Ph\xe1t hi\u1ec7n b\u1ea5t th\u01b0\u1eddng",description:"Ho\u1ea1t \u0111\u1ed9ng upload Drive t\u0103ng \u0111\u1ed9t bi\u1ebfn 150% v\xe0o 14:30",confidence:.92,impact:"medium",action:"Ki\u1ec3m tra v\xe0 x\xe1c minh ho\u1ea1t \u0111\u1ed9ng"}],t={nextWeek:{sheets:Math.round(1.15*C.length),files:Math.round(1.08*I.length),alerts:Math.max(0,Math.round(.9*E.length))},nextMonth:{sheets:Math.round(1.4*C.length),files:Math.round(1.25*I.length),alerts:Math.max(0,Math.round(.8*E.length))}},a=[{id:1,category:"performance",title:"T\u1ed1i \u01b0u h\xf3a Google Sheets API",description:"S\u1eed d\u1ee5ng batch requests \u0111\u1ec3 gi\u1ea3m 40% th\u1eddi gian x\u1eed l\xfd",priority:"high",effort:"medium",impact:"high"}];O(s),P(t),K(a)}finally{F(!1)}},[C.length,I.length,E.length,J]),ne=async()=>{if(!Y.trim()||$)return;const e={id:Date.now(),type:"user",message:Y,timestamp:(new Date).toISOString()};U(s=>[...s,e]),Z(""),ee(!0);try{const e={sheets:C.length,files:I.length,alerts:E.length},s=await p.chat(Y,e),t={id:Date.now()+1,type:"ai",message:s.response,confidence:s.confidence,suggestions:s.suggestions||[],timestamp:(new Date).toISOString()};U(e=>[...e,t])}catch(s){console.error("AI Chat Error:",s);const e={id:Date.now()+1,type:"ai",message:"Xin l\u1ed7i, t\xf4i kh\xf4ng th\u1ec3 tr\u1ea3 l\u1eddi ngay b\xe2y gi\u1edd. Vui l\xf2ng th\u1eed l\u1ea1i sau.",timestamp:(new Date).toISOString()};U(s=>[...s,e])}finally{ee(!1)}};(0,a.useEffect)(()=>{ae()},[ae]),(0,a.useEffect)(()=>{if(V){const e=setInterval(()=>{ae()},6e4);return()=>clearInterval(e)}},[V,ae]);const ie=e=>{switch(e){case"trend":return"\ud83d\udcc8";case"anomaly":return"\u26a0\ufe0f";case"optimization":return"\u26a1";case"security":return"\ud83d\udd12";default:return"\ud83e\udd16"}},le=e=>{switch(e){case"high":return"#ef4444";case"medium":return"#f59e0b";case"low":return"#10b981";default:return"#6b7280"}},ce=e=>{switch(e){case"high":return"#ef4444";case"medium":return"#f59e0b";case"low":return"#10b981";default:return"#6b7280"}};return(0,j.jsxs)("div",{className:"ai-dashboard ai-dashboard-container",children:[(0,j.jsxs)("div",{className:"ai-header page-header",children:[(0,j.jsx)("h2",{children:"\ud83e\udd16 AI Dashboard"}),(0,j.jsxs)("div",{className:"ai-controls page-controls",children:[(0,j.jsxs)("select",{value:J,onChange:e=>G(e.target.value),className:"timeframe-select",children:[(0,j.jsx)("option",{value:"1d",children:"1 ng\xe0y"}),(0,j.jsx)("option",{value:"7d",children:"7 ng\xe0y"}),(0,j.jsx)("option",{value:"30d",children:"30 ng\xe0y"}),(0,j.jsx)("option",{value:"90d",children:"90 ng\xe0y"})]}),(0,j.jsx)("button",{className:"analyze-btn",onClick:ae,disabled:W,children:W?"\ud83d\udd04 \u0110ang ph\xe2n t\xedch...":"\ud83d\udd0d Ph\xe2n t\xedch l\u1ea1i"}),(0,j.jsx)("button",{className:"chat-toggle-btn",onClick:()=>te(!se),children:se?"\ud83d\udcac \u1ea8n Chat":"\ud83d\udcac AI Chat"}),(0,j.jsx)("button",{className:"auto-refresh-btn ".concat(V?"active":""),onClick:()=>L(!V),children:V?"\u23f8\ufe0f T\u1eaft Auto":"\u25b6\ufe0f B\u1eadt Auto"})]})]}),_&&(0,j.jsxs)("div",{className:"error-banner",children:["\u26a0\ufe0f ",_]}),W&&(0,j.jsx)(x.A,{text:"AI \u0111ang ph\xe2n t\xedch d\u1eef li\u1ec7u..."}),(0,j.jsxs)("div",{className:"ai-grid",children:[(0,j.jsxs)("div",{className:"insights-section",children:[(0,j.jsx)("h3",{children:"\ud83d\udca1 AI Insights"}),(0,j.jsx)("div",{className:"insights-list",children:M.map(e=>(0,j.jsxs)("div",{className:"insight-card",children:[(0,j.jsxs)("div",{className:"insight-header",children:[(0,j.jsx)("span",{className:"insight-icon",children:ie(e.type)}),(0,j.jsx)("span",{className:"insight-title",children:e.title}),(0,j.jsxs)("span",{className:"confidence-badge",style:{backgroundColor:le(e.impact)},children:[Math.round(100*e.confidence),"%"]})]}),(0,j.jsx)("p",{className:"insight-description",children:e.description}),(0,j.jsxs)("div",{className:"insight-action",children:[(0,j.jsx)("strong",{children:"H\xe0nh \u0111\u1ed9ng:"})," ",e.action]})]},e.id))})]}),(0,j.jsxs)("div",{className:"predictions-section",children:[(0,j.jsx)("h3",{children:"\ud83d\udd2e D\u1ef1 \u0111o\xe1n"}),R.length>0&&(0,j.jsxs)("div",{className:"prediction-chart-container",children:[(0,j.jsx)("h4",{children:"\ud83d\udcca D\u1ef1 \u0111o\xe1n T\u0103ng Tr\u01b0\u1edfng"}),(0,j.jsx)(i.u,{width:"100%",height:250,children:(0,j.jsxs)(l.E,{data:R,children:[(0,j.jsx)(c.d,{strokeDasharray:"3 3"}),(0,j.jsx)(r.W,{dataKey:"period"}),(0,j.jsx)(o.h,{}),(0,j.jsx)(h.m,{}),(0,j.jsx)(d.yP,{dataKey:"sheets",fill:"#3b82f6",name:"Sheets"}),(0,j.jsx)(d.yP,{dataKey:"files",fill:"#10b981",name:"Files"}),(0,j.jsx)(d.yP,{dataKey:"alerts",fill:"#f59e0b",name:"Alerts"})]})})]}),q.length>0&&(0,j.jsxs)("div",{className:"trend-chart-container",children:[(0,j.jsx)("h4",{children:"\ud83d\udcc8 Xu H\u01b0\u1edbng 7 Ng\xe0y T\u1edbi"}),(0,j.jsx)(i.u,{width:"100%",height:250,children:(0,j.jsxs)(m.Q,{data:q,children:[(0,j.jsx)(c.d,{strokeDasharray:"3 3"}),(0,j.jsx)(r.W,{dataKey:"day"}),(0,j.jsx)(o.h,{}),(0,j.jsx)(h.m,{}),(0,j.jsx)(g.Gk,{type:"monotone",dataKey:"sheets",stackId:"1",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.6,name:"Sheets"}),(0,j.jsx)(g.Gk,{type:"monotone",dataKey:"files",stackId:"1",stroke:"#10b981",fill:"#10b981",fillOpacity:.6,name:"Files"}),(0,j.jsx)(g.Gk,{type:"monotone",dataKey:"alerts",stackId:"1",stroke:"#f59e0b",fill:"#f59e0b",fillOpacity:.6,name:"Alerts"})]})})]}),(0,j.jsxs)("div",{className:"predictions-grid",children:[(0,j.jsxs)("div",{className:"prediction-card",children:[(0,j.jsx)("h4",{children:"\ud83d\udcc5 Tu\u1ea7n t\u1edbi"}),(0,j.jsxs)("div",{className:"prediction-stats",children:[(0,j.jsxs)("div",{className:"stat",children:[(0,j.jsx)("span",{className:"label",children:"Sheets:"}),(0,j.jsx)("span",{className:"value",children:(null===(e=D.nextWeek)||void 0===e?void 0:e.sheets)||0}),C.length>0&&(0,j.jsxs)("span",{className:"change",children:["(",(null===(s=D.nextWeek)||void 0===s?void 0:s.sheets)>C.length?"+":"",(((null===(t=D.nextWeek)||void 0===t?void 0:t.sheets)-C.length)/C.length*100).toFixed(1),"%)"]})]}),(0,j.jsxs)("div",{className:"stat",children:[(0,j.jsx)("span",{className:"label",children:"Files:"}),(0,j.jsx)("span",{className:"value",children:(null===(u=D.nextWeek)||void 0===u?void 0:u.files)||0}),I.length>0&&(0,j.jsxs)("span",{className:"change",children:["(",(null===(y=D.nextWeek)||void 0===y?void 0:y.files)>I.length?"+":"",(((null===(v=D.nextWeek)||void 0===v?void 0:v.files)-I.length)/I.length*100).toFixed(1),"%)"]})]}),(0,j.jsxs)("div",{className:"stat",children:[(0,j.jsx)("span",{className:"label",children:"Alerts:"}),(0,j.jsx)("span",{className:"value",children:(null===(f=D.nextWeek)||void 0===f?void 0:f.alerts)||0})]})]})]}),(0,j.jsxs)("div",{className:"prediction-card",children:[(0,j.jsx)("h4",{children:"\ud83d\udcc6 Th\xe1ng t\u1edbi"}),(0,j.jsxs)("div",{className:"prediction-stats",children:[(0,j.jsxs)("div",{className:"stat",children:[(0,j.jsx)("span",{className:"label",children:"Sheets:"}),(0,j.jsx)("span",{className:"value",children:(null===(N=D.nextMonth)||void 0===N?void 0:N.sheets)||0}),C.length>0&&(0,j.jsxs)("span",{className:"change",children:["(",(null===(b=D.nextMonth)||void 0===b?void 0:b.sheets)>C.length?"+":"",(((null===(w=D.nextMonth)||void 0===w?void 0:w.sheets)-C.length)/C.length*100).toFixed(1),"%)"]})]}),(0,j.jsxs)("div",{className:"stat",children:[(0,j.jsx)("span",{className:"label",children:"Files:"}),(0,j.jsx)("span",{className:"value",children:(null===(k=D.nextMonth)||void 0===k?void 0:k.files)||0}),I.length>0&&(0,j.jsxs)("span",{className:"change",children:["(",(null===(S=D.nextMonth)||void 0===S?void 0:S.files)>I.length?"+":"",(((null===(T=D.nextMonth)||void 0===T?void 0:T.files)-I.length)/I.length*100).toFixed(1),"%)"]})]}),(0,j.jsxs)("div",{className:"stat",children:[(0,j.jsx)("span",{className:"label",children:"Alerts:"}),(0,j.jsx)("span",{className:"value",children:(null===(A=D.nextMonth)||void 0===A?void 0:A.alerts)||0})]})]})]})]})]}),(0,j.jsxs)("div",{className:"recommendations-section",children:[(0,j.jsx)("h3",{children:"\ud83d\udca1 Khuy\u1ebfn ngh\u1ecb"}),(0,j.jsx)("div",{className:"recommendations-list",children:z.map(e=>(0,j.jsxs)("div",{className:"recommendation-card",children:[(0,j.jsxs)("div",{className:"rec-header",children:[(0,j.jsx)("span",{className:"rec-title",children:e.title}),(0,j.jsx)("span",{className:"priority-badge",style:{backgroundColor:ce(e.priority)},children:e.priority})]}),(0,j.jsx)("p",{className:"rec-description",children:e.description}),(0,j.jsxs)("div",{className:"rec-meta",children:[(0,j.jsxs)("span",{className:"effort",children:["Effort: ",e.effort]}),(0,j.jsxs)("span",{className:"impact",children:["Impact: ",e.impact]})]}),(0,j.jsx)("button",{className:"implement-btn",onClick:()=>(async e=>{const s=z.find(s=>s.id===e);s&&window.confirm("B\u1ea1n c\xf3 mu\u1ed1n tri\u1ec3n khai: ".concat(s.title,"?"))&&(console.log("Implementing recommendation:",s),alert("\u0110\xe3 l\xean l\u1ecbch tri\u1ec3n khai: ".concat(s.title)))})(e.id),children:"implemented"===e.status?"\u2705 \u0110\xe3 tri\u1ec3n khai":"\ud83d\ude80 Tri\u1ec3n khai"})]},e.id))})]}),(0,j.jsxs)("div",{className:"performance-section",children:[(0,j.jsx)("h3",{children:"\u26a1 AI Performance"}),(0,j.jsxs)("div",{className:"performance-metrics",children:[(0,j.jsxs)("div",{className:"metric",children:[(0,j.jsx)("div",{className:"metric-label",children:"Accuracy"}),(0,j.jsx)("div",{className:"metric-value",children:"94.2%"}),(0,j.jsx)("div",{className:"metric-trend",children:"\u2197\ufe0f +2.1%"})]}),(0,j.jsxs)("div",{className:"metric",children:[(0,j.jsx)("div",{className:"metric-label",children:"Response Time"}),(0,j.jsx)("div",{className:"metric-value",children:"1.2s"}),(0,j.jsx)("div",{className:"metric-trend",children:"\u2198\ufe0f -0.3s"})]}),(0,j.jsxs)("div",{className:"metric",children:[(0,j.jsx)("div",{className:"metric-label",children:"Insights Generated"}),(0,j.jsx)("div",{className:"metric-value",children:"47"}),(0,j.jsx)("div",{className:"metric-trend",children:"\u2197\ufe0f +12"})]})]})]})]}),se&&(0,j.jsxs)("div",{className:"ai-chat-panel",children:[(0,j.jsxs)("div",{className:"chat-header",children:[(0,j.jsx)("h3",{children:"\ud83d\udcac AI Assistant"}),(0,j.jsx)("button",{className:"close-chat-btn",onClick:()=>te(!1),children:"\u2715"})]}),(0,j.jsx)("div",{className:"chat-messages",children:0===Q.length?(0,j.jsxs)("div",{className:"chat-welcome",children:[(0,j.jsx)("p",{children:"\ud83d\udc4b Xin ch\xe0o! T\xf4i l\xe0 AI Assistant."}),(0,j.jsx)("p",{children:"H\xe3y h\u1ecfi t\xf4i v\u1ec1 d\u1eef li\u1ec7u, insights, ho\u1eb7c recommendations!"})]}):Q.map(e=>(0,j.jsxs)("div",{className:"chat-message ".concat(e.type),children:[(0,j.jsx)("div",{className:"message-content",children:e.message}),e.suggestions&&e.suggestions.length>0&&(0,j.jsx)("div",{className:"message-suggestions",children:e.suggestions.map((e,s)=>(0,j.jsx)("button",{className:"suggestion-btn",onClick:()=>Z(e),children:e},s))}),(0,j.jsx)("div",{className:"message-time",children:new Date(e.timestamp).toLocaleTimeString()})]},e.id))}),(0,j.jsxs)("div",{className:"chat-input-container",children:[(0,j.jsx)("input",{type:"text",className:"chat-input",placeholder:"Nh\u1eadp c\xe2u h\u1ecfi c\u1ee7a b\u1ea1n...",value:Y,onChange:e=>Z(e.target.value),onKeyPress:e=>"Enter"===e.key&&ne(),disabled:$}),(0,j.jsx)("button",{className:"chat-send-btn",onClick:ne,disabled:$||!Y.trim(),children:$?"\u23f3":"\ud83d\udce4"})]})]})]})}}}]);
//# sourceMappingURL=ai-dashboard.dd777ea3.chunk.js.map
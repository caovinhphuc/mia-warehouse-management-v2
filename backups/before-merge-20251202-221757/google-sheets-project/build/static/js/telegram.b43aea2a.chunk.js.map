{"version":3,"file":"static/js/telegram.b43aea2a.chunk.js","mappings":"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","sources":["services/telegramService.js","components/telegram/TelegramIntegration.jsx"],"sourcesContent":["/**\n * Telegram Service - K·∫øt n·ªëi v·ªõi Backend Telegram API\n */\n\nconst API_BASE_URL =\n  import.meta.env.VITE_API_URL ||\n  import.meta.env.REACT_APP_API_URL ||\n  \"http://localhost:3001\";\n\nclass TelegramService {\n  /**\n   * G·ª≠i tin nh·∫Øn Telegram qua alerts API\n   */\n  async sendMessage(message, chatId = null, parseMode = \"HTML\") {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/alerts/telegram`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          message,\n          chatId:\n            chatId ||\n            import.meta.env.VITE_TELEGRAM_CHAT_ID ||\n            import.meta.env.REACT_APP_TELEGRAM_CHAT_ID,\n          parseMode,\n          disableNotification: false,\n        }),\n      });\n\n      if (!response.ok) {\n        const errorData = await response.json().catch(() => ({}));\n        throw new Error(\n          errorData.error || `Telegram send failed: ${response.statusText}`,\n        );\n      }\n\n      return await response.json();\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error(\"Error sending Telegram message:\", error);\n      throw error;\n    }\n  }\n\n  /**\n   * G·ª≠i tin nh·∫Øn ƒë∆°n gi·∫£n\n   */\n  async sendSimpleMessage(text) {\n    return this.sendMessage(text);\n  }\n\n  /**\n   * G·ª≠i tin nh·∫Øn v·ªõi format HTML\n   */\n  async sendHTMLMessage(htmlContent) {\n    return this.sendMessage(htmlContent, null, \"HTML\");\n  }\n\n  /**\n   * G·ª≠i tin nh·∫Øn v·ªõi format Markdown\n   */\n  async sendMarkdownMessage(markdownContent) {\n    return this.sendMessage(markdownContent, null, \"Markdown\");\n  }\n\n  /**\n   * Test Telegram connection\n   */\n  async testConnection() {\n    try {\n      const response = await fetch(`${API_BASE_URL}/api/alerts/test`, {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({\n          channel: \"telegram\",\n        }),\n      });\n\n      if (!response.ok) {\n        throw new Error(`Test failed: ${response.statusText}`);\n      }\n\n      return await response.json();\n    } catch (error) {\n      // eslint-disable-next-line no-console\n      console.error(\"Error testing Telegram connection:\", error);\n      throw error;\n    }\n  }\n}\n\n// Export singleton instance\nexport const telegramService = new TelegramService();\nexport default telegramService;\n","import React, { useState, useEffect } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport Loading from \"../Common/Loading\";\nimport { telegramService } from \"../../services/telegramService\";\nimport { message } from \"antd\";\nimport \"./TelegramIntegration.css\";\n\nconst TelegramIntegration = () => {\n  const { loading, error } = useSelector((state) => state.auth);\n  const { isAuthenticated, serviceAccount } = useSelector(\n    (state) => state.auth,\n  );\n\n  const [botInfo, setBotInfo] = useState(null);\n  const [chats, setChats] = useState([]);\n  const [selectedChat, setSelectedChat] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [newMessage, setNewMessage] = useState(\"\");\n  const [messageType, setMessageType] = useState(\"text\"); // text, photo, document\n  const [isConnected, setIsConnected] = useState(false);\n  const [webhookUrl, setWebhookUrl] = useState(\"\");\n  const [showSendModal, setShowSendModal] = useState(false);\n\n  // Sample data\n  const sampleBotInfo = {\n    id: \"8434038911\",\n    username: \"mia_logistics_bot\",\n    first_name: \"MIA Logistics Bot\",\n    can_join_groups: true,\n    can_read_all_group_messages: false,\n    supports_inline_queries: false,\n  };\n\n  const sampleChats = [\n    {\n      id: \"-4818209867\",\n      type: \"group\",\n      title: \"MIA Logistics Team\",\n      username: \"mia_logistics_team\",\n      member_count: 15,\n      last_activity: \"2024-01-15T10:30:00Z\",\n    },\n    {\n      id: \"123456789\",\n      type: \"private\",\n      first_name: \"Nguy·ªÖn VƒÉn A\",\n      username: \"nguyenvana\",\n      last_activity: \"2024-01-14T15:45:00Z\",\n    },\n    {\n      id: \"987654321\",\n      type: \"private\",\n      first_name: \"Tr·∫ßn Th·ªã B\",\n      username: \"tranthib\",\n      last_activity: \"2024-01-13T09:20:00Z\",\n    },\n  ];\n\n  const sampleMessages = [\n    {\n      id: 1,\n      chat_id: \"-4818209867\",\n      text: \"B√°o c√°o h√†ng ng√†y ƒë√£ ƒë∆∞·ª£c t·∫°o th√†nh c√¥ng!\",\n      date: \"2024-01-15T10:30:00Z\",\n      from: \"bot\",\n      message_type: \"text\",\n    },\n    {\n      id: 2,\n      chat_id: \"-4818209867\",\n      text: \"C√≥ 5 ƒë∆°n h√†ng m·ªõi c·∫ßn x·ª≠ l√Ω\",\n      date: \"2024-01-15T09:15:00Z\",\n      from: \"bot\",\n      message_type: \"text\",\n    },\n    {\n      id: 3,\n      chat_id: \"-4818209867\",\n      text: \"H·ªá th·ªëng backup ƒë√£ ho√†n th√†nh\",\n      date: \"2024-01-15T08:00:00Z\",\n      from: \"bot\",\n      message_type: \"text\",\n    },\n  ];\n\n  useEffect(() => {\n    setBotInfo(sampleBotInfo);\n    setChats(sampleChats);\n    setMessages(sampleMessages);\n    setIsConnected(true);\n  }, []);\n\n  const handleChatSelect = (chat) => {\n    setSelectedChat(chat);\n    const chatMessages = messages.filter((msg) => msg.chat_id === chat.id);\n    setMessages(chatMessages);\n  };\n\n  const handleSendMessage = async () => {\n    if (!newMessage.trim() || !selectedChat) return;\n\n    const messageData = {\n      id: Date.now(),\n      chat_id: selectedChat.id,\n      text: newMessage,\n      date: new Date().toISOString(),\n      from: \"user\",\n      message_type: messageType,\n    };\n\n    setMessages((prev) => [messageData, ...prev]);\n    setNewMessage(\"\");\n    setShowSendModal(false);\n\n    try {\n      // Send via backend API\n      const result = await telegramService.sendMessage(\n        newMessage,\n        selectedChat.id,\n        messageType === \"text\" ? \"HTML\" : \"HTML\",\n      );\n\n      if (result.success) {\n        message.success(\"Tin nh·∫Øn ƒë√£ ƒë∆∞·ª£c g·ª≠i th√†nh c√¥ng!\");\n\n        const botResponse = {\n          id: Date.now() + 1,\n          chat_id: selectedChat.id,\n          text: \"‚úÖ Tin nh·∫Øn ƒë√£ ƒë∆∞·ª£c g·ª≠i th√†nh c√¥ng!\",\n          date: new Date().toISOString(),\n          from: \"bot\",\n          message_type: \"text\",\n        };\n        setMessages((prev) => [botResponse, ...prev]);\n      }\n    } catch (error) {\n      console.error(\"Error sending message:\", error);\n      message.error(`L·ªói g·ª≠i tin nh·∫Øn: ${error.message}`);\n\n      const errorResponse = {\n        id: Date.now() + 1,\n        chat_id: selectedChat.id,\n        text: `‚ùå L·ªói: ${error.message}`,\n        date: new Date().toISOString(),\n        from: \"bot\",\n        message_type: \"error\",\n      };\n      setMessages((prev) => [errorResponse, ...prev]);\n    }\n  };\n\n  const handleSetWebhook = () => {\n    if (!webhookUrl.trim()) return;\n\n    // Simulate webhook setup\n    console.log(\"Setting webhook to:\", webhookUrl);\n    alert(\"Webhook ƒë√£ ƒë∆∞·ª£c thi·∫øt l·∫≠p th√†nh c√¥ng!\");\n  };\n\n  const handleDeleteWebhook = () => {\n    setWebhookUrl(\"\");\n    console.log(\"Webhook deleted\");\n    alert(\"Webhook ƒë√£ ƒë∆∞·ª£c x√≥a!\");\n  };\n\n  const handleSendBulkMessage = () => {\n    if (!newMessage.trim()) return;\n\n    const bulkMessages = chats.map((chat) => ({\n      id: Date.now() + Math.random(),\n      chat_id: chat.id,\n      text: newMessage,\n      date: new Date().toISOString(),\n      from: \"user\",\n      message_type: messageType,\n    }));\n\n    setMessages((prev) => [...bulkMessages, ...prev]);\n    setNewMessage(\"\");\n    setShowSendModal(false);\n  };\n\n  const formatDate = (dateString) => {\n    return new Date(dateString).toLocaleDateString(\"vi-VN\", {\n      year: \"numeric\",\n      month: \"2-digit\",\n      day: \"2-digit\",\n      hour: \"2-digit\",\n      minute: \"2-digit\",\n    });\n  };\n\n  const getChatDisplayName = (chat) => {\n    if (chat.type === \"group\") {\n      return chat.title;\n    }\n    return `${chat.first_name} ${chat.last_name || \"\"}`.trim();\n  };\n\n  const getChatIcon = (chat) => {\n    return chat.type === \"group\" ? \"üë•\" : \"üë§\";\n  };\n\n  if (loading) return <Loading />;\n  if (error) return <div className=\"error-state\">L·ªói: {error}</div>;\n\n  return (\n    <div className=\"telegram-container\">\n      {/* Header */}\n      <div className=\"telegram-header\">\n        <div className=\"header-left\">\n          <h1>üí¨ Telegram Bot</h1>\n          <p>Qu·∫£n l√Ω v√† g·ª≠i th√¥ng b√°o qua Telegram</p>\n        </div>\n\n        <div className=\"header-right\">\n          <div className=\"connection-status\">\n            <div\n              className={`status-dot ${\n                isConnected ? \"connected\" : \"disconnected\"\n              }`}\n            ></div>\n            <span>{isConnected ? \"ƒê√£ k·∫øt n·ªëi\" : \"Ch∆∞a k·∫øt n·ªëi\"}</span>\n          </div>\n        </div>\n      </div>\n\n      <div className=\"telegram-content\">\n        {/* Bot Info */}\n        <div className=\"bot-info-card\">\n          <div className=\"card-header\">\n            <h3>ü§ñ Th√¥ng tin Bot</h3>\n          </div>\n          <div className=\"card-body\">\n            {botInfo && (\n              <div className=\"bot-details\">\n                <div className=\"bot-avatar\">ü§ñ</div>\n                <div className=\"bot-info\">\n                  <div className=\"bot-name\">{botInfo.first_name}</div>\n                  <div className=\"bot-username\">@{botInfo.username}</div>\n                  <div className=\"bot-id\">ID: {botInfo.id}</div>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Webhook Settings */}\n        <div className=\"webhook-card\">\n          <div className=\"card-header\">\n            <h3>üîó C√†i ƒë·∫∑t Webhook</h3>\n          </div>\n          <div className=\"card-body\">\n            <div className=\"webhook-form\">\n              <input\n                type=\"url\"\n                placeholder=\"Nh·∫≠p URL webhook...\"\n                value={webhookUrl}\n                onChange={(e) => setWebhookUrl(e.target.value)}\n                className=\"webhook-input\"\n              />\n              <div className=\"webhook-actions\">\n                <button\n                  className=\"btn btn-primary\"\n                  onClick={handleSetWebhook}\n                  disabled={!webhookUrl.trim()}\n                >\n                  Thi·∫øt l·∫≠p Webhook\n                </button>\n                <button\n                  className=\"btn btn-danger\"\n                  onClick={handleDeleteWebhook}\n                  disabled={!webhookUrl.trim()}\n                >\n                  X√≥a Webhook\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Chats and Messages */}\n        <div className=\"chats-messages-container\">\n          {/* Chats List */}\n          <div className=\"chats-sidebar\">\n            <div className=\"sidebar-header\">\n              <h3>üí¨ Danh s√°ch Chat</h3>\n              <span className=\"chat-count\">{chats.length} chats</span>\n            </div>\n\n            <div className=\"chats-list\">\n              {chats.map((chat) => (\n                <div\n                  key={chat.id}\n                  className={`chat-item ${\n                    selectedChat?.id === chat.id ? \"active\" : \"\"\n                  }`}\n                  onClick={() => handleChatSelect(chat)}\n                >\n                  <div className=\"chat-icon\">{getChatIcon(chat)}</div>\n                  <div className=\"chat-info\">\n                    <div className=\"chat-name\">{getChatDisplayName(chat)}</div>\n                    <div className=\"chat-meta\">\n                      {chat.type === \"group\"\n                        ? `${chat.member_count} th√†nh vi√™n`\n                        : \"Tin nh·∫Øn ri√™ng\"}\n                    </div>\n                    <div className=\"chat-last-activity\">\n                      {formatDate(chat.last_activity)}\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </div>\n\n          {/* Messages Area */}\n          <div className=\"messages-area\">\n            {selectedChat ? (\n              <>\n                <div className=\"messages-header\">\n                  <div className=\"chat-title\">\n                    <span className=\"chat-icon\">\n                      {getChatIcon(selectedChat)}\n                    </span>\n                    <span>{getChatDisplayName(selectedChat)}</span>\n                  </div>\n                  <div className=\"message-actions\">\n                    <button\n                      className=\"btn btn-primary\"\n                      onClick={() => setShowSendModal(true)}\n                    >\n                      ‚úâÔ∏è G·ª≠i tin nh·∫Øn\n                    </button>\n                  </div>\n                </div>\n\n                <div className=\"messages-list\">\n                  {messages.map((message) => (\n                    <div\n                      key={message.id}\n                      className={`message-item ${\n                        message.from === \"bot\" ? \"bot-message\" : \"user-message\"\n                      }`}\n                    >\n                      <div className=\"message-content\">\n                        <div className=\"message-text\">{message.text}</div>\n                        <div className=\"message-time\">\n                          {formatDate(message.date)}\n                        </div>\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </>\n            ) : (\n              <div className=\"no-chat-selected\">\n                <div className=\"empty-icon\">üí¨</div>\n                <h3>Ch·ªçn m·ªôt chat ƒë·ªÉ xem tin nh·∫Øn</h3>\n                <p>Ch·ªçn t·ª´ danh s√°ch b√™n tr√°i ƒë·ªÉ b·∫Øt ƒë·∫ßu tr√≤ chuy·ªán</p>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n\n      {/* Send Message Modal */}\n      {showSendModal && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal\">\n            <div className=\"modal-header\">\n              <h3>G·ª≠i tin nh·∫Øn</h3>\n              <button\n                className=\"close-btn\"\n                onClick={() => setShowSendModal(false)}\n              >\n                ‚úï\n              </button>\n            </div>\n            <div className=\"modal-body\">\n              <div className=\"form-group\">\n                <label>Lo·∫°i tin nh·∫Øn</label>\n                <select\n                  value={messageType}\n                  onChange={(e) => setMessageType(e.target.value)}\n                  className=\"select-field\"\n                >\n                  <option value=\"text\">VƒÉn b·∫£n</option>\n                  <option value=\"photo\">H√¨nh ·∫£nh</option>\n                  <option value=\"document\">T√†i li·ªáu</option>\n                </select>\n              </div>\n              <div className=\"form-group\">\n                <label>N·ªôi dung tin nh·∫Øn</label>\n                <textarea\n                  value={newMessage}\n                  onChange={(e) => setNewMessage(e.target.value)}\n                  placeholder=\"Nh·∫≠p n·ªôi dung tin nh·∫Øn...\"\n                  className=\"textarea-field\"\n                  rows=\"4\"\n                />\n              </div>\n            </div>\n            <div className=\"modal-footer\">\n              <button\n                className=\"btn btn-secondary\"\n                onClick={() => setShowSendModal(false)}\n              >\n                H·ªßy\n              </button>\n              <button\n                className=\"btn btn-primary\"\n                onClick={handleSendMessage}\n                disabled={!newMessage.trim()}\n              >\n                G·ª≠i tin nh·∫Øn\n              </button>\n              <button\n                className=\"btn btn-warning\"\n                onClick={handleSendBulkMessage}\n                disabled={!newMessage.trim()}\n              >\n                G·ª≠i t·∫•t c·∫£\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default TelegramIntegration;\n"],"names":["API_BASE_URL","env","VITE_API_URL","REACT_APP_API_URL","telegramService","sendMessage","message","chatId","arguments","length","undefined","parseMode","response","fetch","concat","method","headers","body","JSON","stringify","VITE_TELEGRAM_CHAT_ID","REACT_APP_TELEGRAM_CHAT_ID","disableNotification","ok","errorData","json","catch","Error","error","statusText","console","sendSimpleMessage","text","this","sendHTMLMessage","htmlContent","sendMarkdownMessage","markdownContent","testConnection","channel","TelegramIntegration","loading","useSelector","state","auth","isAuthenticated","serviceAccount","botInfo","setBotInfo","useState","chats","setChats","selectedChat","setSelectedChat","messages","setMessages","newMessage","setNewMessage","messageType","setMessageType","isConnected","setIsConnected","webhookUrl","setWebhookUrl","showSendModal","setShowSendModal","sampleBotInfo","id","username","first_name","can_join_groups","can_read_all_group_messages","supports_inline_queries","sampleChats","type","title","member_count","last_activity","sampleMessages","chat_id","date","from","message_type","useEffect","formatDate","dateString","Date","toLocaleDateString","year","month","day","hour","minute","getChatDisplayName","chat","last_name","trim","getChatIcon","_jsx","Loading","_jsxs","className","children","placeholder","value","onChange","e","target","onClick","handleSetWebhook","log","alert","disabled","handleDeleteWebhook","map","chatMessages","filter","msg","handleChatSelect","_Fragment","rows","async","messageData","now","toISOString","prev","success","botResponse","errorResponse","handleSendBulkMessage","bulkMessages","Math","random"],"ignoreList":[],"sourceRoot":""}
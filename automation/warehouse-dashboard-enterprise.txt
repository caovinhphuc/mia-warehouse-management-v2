<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Enterprise Warehouse Dashboard - One.tga.com.vn</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --primary-color: #1a73e8;
      --secondary-color: #34a853;
      --warning-color: #fbbc04;
      --danger-color: #ea4335;
      --dark-bg: #1e1e2e;
      --card-bg: #27273a;
      --text-primary: #ffffff;
      --text-secondary: #a8a8b3;
      --border-color: #3a3a4e;
      --success-gradient: linear-gradient(135deg, #34a853 0%, #188038 100%);
      --warning-gradient: linear-gradient(135deg, #fbbc04 0%, #f9a600 100%);
      --danger-gradient: linear-gradient(135deg, #ea4335 0%, #c5221f 100%);
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Arial, sans-serif;
      background-color: var(--dark-bg);
      color: var(--text-primary);
      line-height: 1.6;
      overflow-x: hidden;
    }

    .dashboard-container {
      max-width: 1920px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Header Styles */
    .header {
      background: var(--card-bg);
      padding: 20px 30px;
      border-radius: 12px;
      margin-bottom: 30px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
    }

    .header h1 {
      font-size: 28px;
      font-weight: 600;
      background: linear-gradient(135deg, #1a73e8 0%, #34a853 100%);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .header-actions {
      display: flex;
      gap: 15px;
      align-items: center;
    }

    .sync-status {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 16px;
      background: rgba(52, 168, 83, 0.1);
      border: 1px solid rgba(52, 168, 83, 0.3);
      border-radius: 8px;
      font-size: 14px;
    }

    .sync-indicator {
      width: 8px;
      height: 8px;
      background: var(--secondary-color);
      border-radius: 50%;
      animation: pulse 2s infinite;
    }

    @keyframes pulse {
      0% {
        opacity: 1;
        transform: scale(1);
      }

      50% {
        opacity: 0.5;
        transform: scale(1.2);
      }

      100% {
        opacity: 1;
        transform: scale(1);
      }
    }

    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .btn-primary {
      background: var(--primary-color);
      color: white;
    }

    .btn-primary:hover {
      background: #1557b0;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(26, 115, 232, 0.4);
    }

    /* KPI Cards Grid */
    .kpi-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-bottom: 30px;
    }

    .kpi-card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 24px;
      position: relative;
      overflow: hidden;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      border: 1px solid var(--border-color);
    }

    .kpi-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
    }

    .kpi-card::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--primary-color);
    }

    .kpi-card.success::before {
      background: var(--success-gradient);
    }

    .kpi-card.warning::before {
      background: var(--warning-gradient);
    }

    .kpi-card.danger::before {
      background: var(--danger-gradient);
    }

    .kpi-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 16px;
    }

    .kpi-title {
      font-size: 14px;
      color: var(--text-secondary);
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .kpi-icon {
      width: 40px;
      height: 40px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 10px;
      font-size: 20px;
    }

    .kpi-icon.success {
      background: rgba(52, 168, 83, 0.2);
      color: #34a853;
    }

    .kpi-icon.warning {
      background: rgba(251, 188, 4, 0.2);
      color: #fbbc04;
    }

    .kpi-icon.danger {
      background: rgba(234, 67, 53, 0.2);
      color: #ea4335;
    }

    .kpi-value {
      font-size: 32px;
      font-weight: 700;
      margin-bottom: 8px;
    }

    .kpi-change {
      font-size: 14px;
      display: flex;
      align-items: center;
      gap: 4px;
    }

    .kpi-change.positive {
      color: var(--secondary-color);
    }

    .kpi-change.negative {
      color: var(--danger-color);
    }

    /* Main Content Grid */
    .main-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
      margin-bottom: 30px;
    }

    @media (max-width: 1200px) {
      .main-grid {
        grid-template-columns: 1fr;
      }
    }

    /* Section Cards */
    .section-card {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 24px;
      border: 1px solid var(--border-color);
    }

    .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }

    .section-title {
      font-size: 18px;
      font-weight: 600;
    }

    .section-actions {
      display: flex;
      gap: 10px;
    }

    /* Order Status Table */
    .order-table {
      width: 100%;
      border-collapse: collapse;
    }

    .order-table th {
      text-align: left;
      padding: 12px;
      font-size: 13px;
      font-weight: 600;
      color: var(--text-secondary);
      text-transform: uppercase;
      border-bottom: 2px solid var(--border-color);
    }

    .order-table td {
      padding: 12px;
      font-size: 14px;
      border-bottom: 1px solid var(--border-color);
    }

    .order-table tr:hover {
      background: rgba(26, 115, 232, 0.1);
    }

    .status-badge {
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 500;
      display: inline-block;
    }

    .status-badge.on-time {
      background: rgba(52, 168, 83, 0.2);
      color: #34a853;
    }

    .status-badge.at-risk {
      background: rgba(251, 188, 4, 0.2);
      color: #fbbc04;
    }

    .status-badge.delayed {
      background: rgba(234, 67, 53, 0.2);
      color: #ea4335;
    }

    /* Platform Pills */
    .platform-pill {
      padding: 2px 8px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 500;
      display: inline-block;
    }

    .platform-pill.shopee {
      background: rgba(238, 77, 45, 0.2);
      color: #ee4d2d;
    }

    .platform-pill.tiktok {
      background: rgba(255, 0, 80, 0.2);
      color: #ff0050;
    }

    .platform-pill.tiki {
      background: rgba(27, 168, 255, 0.2);
      color: #1ba8ff;
    }

    /* Alert Section */
    .alert-list {
      max-height: 400px;
      overflow-y: auto;
    }

    .alert-item {
      padding: 16px;
      border-radius: 8px;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 12px;
      transition: all 0.3s ease;
    }

    .alert-item:hover {
      transform: translateX(5px);
    }

    .alert-item.critical {
      background: rgba(234, 67, 53, 0.1);
      border-left: 4px solid var(--danger-color);
    }

    .alert-item.warning {
      background: rgba(251, 188, 4, 0.1);
      border-left: 4px solid var(--warning-color);
    }

    .alert-icon {
      font-size: 20px;
    }

    .alert-content {
      flex: 1;
    }

    .alert-title {
      font-weight: 600;
      margin-bottom: 4px;
    }

    .alert-time {
      font-size: 12px;
      color: var(--text-secondary);
    }

    /* Bottom Grid */
    .bottom-grid {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 20px;
    }

    @media (max-width: 1200px) {
      .bottom-grid {
        grid-template-columns: 1fr;
      }
    }

    /* Performance Chart */
    .chart-container {
      height: 300px;
      position: relative;
      margin-top: 20px;
    }

    .chart-placeholder {
      width: 100%;
      height: 100%;
      display: flex;
      align-items: center;
      justify-content: center;
      background: rgba(26, 115, 232, 0.1);
      border-radius: 8px;
      border: 2px dashed var(--primary-color);
    }

    /* Carrier Performance */
    .carrier-list {
      display: flex;
      flex-direction: column;
      gap: 16px;
    }

    .carrier-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .carrier-info {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .carrier-logo {
      width: 40px;
      height: 40px;
      background: var(--primary-color);
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      font-size: 14px;
    }

    .carrier-stats {
      text-align: right;
    }

    .carrier-rate {
      font-size: 18px;
      font-weight: 600;
      color: var(--secondary-color);
    }

    .carrier-label {
      font-size: 12px;
      color: var(--text-secondary);
    }

    /* Loading States */
    .loading {
      display: inline-block;
      width: 20px;
      height: 20px;
      border: 3px solid var(--border-color);
      border-radius: 50%;
      border-top-color: var(--primary-color);
      animation: spin 1s ease-in-out infinite;
    }

    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }

    /* Settings Modal */
    .modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      z-index: 1000;
      align-items: center;
      justify-content: center;
    }

    .modal-content {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 32px;
      max-width: 600px;
      width: 90%;
      max-height: 80vh;
      overflow-y: auto;
    }

    .modal-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
    }

    .modal-close {
      font-size: 24px;
      cursor: pointer;
      color: var(--text-secondary);
      transition: color 0.3s ease;
    }

    .modal-close:hover {
      color: var(--text-primary);
    }

    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      margin-bottom: 8px;
      font-weight: 500;
      color: var(--text-secondary);
    }

    .form-input {
      width: 100%;
      padding: 10px 16px;
      background: var(--dark-bg);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      color: var(--text-primary);
      font-size: 14px;
      transition: border-color 0.3s ease;
    }

    .form-input:focus {
      outline: none;
      border-color: var(--primary-color);
    }

    /* Toast Notifications */
    .toast-container {
      position: fixed;
      top: 20px;
      right: 20px;
      z-index: 2000;
    }

    .toast {
      background: var(--card-bg);
      border-radius: 8px;
      padding: 16px 24px;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 12px;
      min-width: 300px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }

      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    .toast.success {
      border-left: 4px solid var(--secondary-color);
    }

    .toast.error {
      border-left: 4px solid var(--danger-color);
    }

    /* Advanced Filters */
    .filter-panel {
      background: var(--card-bg);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 20px;
      border: 1px solid var(--border-color);
    }

    .filter-row {
      display: flex;
      gap: 15px;
      margin-bottom: 15px;
      flex-wrap: wrap;
    }

    .filter-group {
      flex: 1;
      min-width: 200px;
    }

    .filter-label {
      display: block;
      font-size: 12px;
      color: var(--text-secondary);
      margin-bottom: 5px;
    }

    .filter-input,
    .filter-select {
      width: 100%;
      padding: 8px 12px;
      background: var(--dark-bg);
      border: 1px solid var(--border-color);
      border-radius: 6px;
      color: var(--text-primary);
      font-size: 14px;
    }

    /* Export Buttons */
    .export-menu {
      position: relative;
    }

    .export-dropdown {
      position: absolute;
      top: 100%;
      right: 0;
      background: var(--card-bg);
      border: 1px solid var(--border-color);
      border-radius: 8px;
      padding: 8px 0;
      margin-top: 4px;
      min-width: 180px;
      display: none;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    }

    .export-dropdown.show {
      display: block;
    }

    .export-option {
      padding: 10px 20px;
      cursor: pointer;
      transition: background 0.3s ease;
    }

    .export-option:hover {
      background: rgba(26, 115, 232, 0.1);
    }

    /* Language Switcher */
    .language-switcher {
      display: flex;
      gap: 8px;
      align-items: center;
      padding: 6px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 6px;
    }

    .lang-option {
      padding: 4px 12px;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      transition: all 0.3s ease;
    }

    .lang-option.active {
      background: var(--primary-color);
      color: white;
    }

    /* Sound Notification Icon */
    .sound-toggle {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      padding: 8px 12px;
      background: rgba(255, 255, 255, 0.1);
      border-radius: 6px;
      transition: all 0.3s ease;
    }

    .sound-toggle:hover {
      background: rgba(255, 255, 255, 0.2);
    }

    .sound-icon {
      font-size: 18px;
    }

    /* Notification Popup */
    .notification-popup {
      position: fixed;
      top: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: var(--card-bg);
      border: 2px solid var(--danger-color);
      border-radius: 12px;
      padding: 20px;
      min-width: 400px;
      box-shadow: 0 8px 24px rgba(0, 0, 0, 0.4);
      display: none;
      z-index: 3000;
      animation: slideDown 0.5s ease;
    }

    @keyframes slideDown {
      from {
        transform: translateX(-50%) translateY(-100%);
        opacity: 0;
      }

      to {
        transform: translateX(-50%) translateY(0);
        opacity: 1;
      }
    }


    .notification-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .notification-title {
      font-size: 18px;
      font-weight: 600;
      color: var(--danger-color);
    }

    .notification-close {
      cursor: pointer;
      font-size: 20px;
      color: var(--text-secondary);
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .dashboard-container {
        padding: 10px;
      }

      .header {
        flex-direction: column;
        gap: 16px;
        text-align: center;
      }

      .kpi-grid {
        grid-template-columns: 1fr;
      }

      .section-card {
        padding: 16px;
      }

      .filter-row {
        flex-direction: column;
      }

      .notification-popup {
        min-width: 90%;
        margin: 0 5%;
      }
    }
  </style>
</head>

<body>
  <div class="dashboard-container">
    <!-- Header -->
    <div class="header">
      <div>
        <h1 data-i18n="dashboard-title">Enterprise Warehouse Dashboard</h1>
        <p style="color: var(--text-secondary); margin-top: 4px;" data-i18n="dashboard-subtitle">One.tga.com.vn -
          Realtime Operations Monitor</p>
      </div>
      <div class="header-actions">
        <div class="language-switcher">
          <div class="lang-option active" data-lang="en">EN</div>
          <div class="lang-option" data-lang="vi">VI</div>
        </div>
        <div class="sound-toggle" id="soundToggle">
          <span class="sound-icon">üîî</span>
          <span data-i18n="sound-on">Sound ON</span>
        </div>
        <div class="sync-status">
          <div class="sync-indicator"></div>
          <span data-i18n="sync-active">Live Sync Active</span>
        </div>
        <div class="export-menu">
          <button class="btn btn-primary" onclick="toggleExportMenu()">
            <span>üì•</span>
            <span data-i18n="export">Export</span>
          </button>
          <div class="export-dropdown" id="exportDropdown">
            <div class="export-option" onclick="exportToPDF()">
              <span>üìÑ PDF Report</span>
            </div>
            <div class="export-option" onclick="exportToExcel()">
              <span>üìä Excel Spreadsheet</span>
            </div>
            <div class="export-option" onclick="exportToCSV()">
              <span>üìã CSV Data</span>
            </div>
          </div>
        </div>
        <button class="btn btn-primary" onclick="openSettings()">
          <span>‚öôÔ∏è</span>
          <span data-i18n="settings">Settings</span>
        </button>
      </div>
    </div>

    <!-- Advanced Filter Panel -->
    <div class="filter-panel">
      <h3 style="margin-bottom: 15px;" data-i18n="advanced-filters">Advanced Filters</h3>
      <div class="filter-row">
        <div class="filter-group">
          <label class="filter-label" data-i18n="filter-platform">Platform</label>
          <select class="filter-select" id="filterPlatform">
            <option value="all" data-i18n="all-platforms">All Platforms</option>
            <option value="shopee">Shopee</option>
            <option value="tiktok">TikTok</option>
            <option value="tiki">Tiki</option>
          </select>
        </div>
        <div class="filter-group">
          <label class="filter-label" data-i18n="filter-status">SLA Status</label>
          <select class="filter-select" id="filterStatus">
            <option value="all" data-i18n="all-statuses">All Statuses</option>
            <option value="on-time" data-i18n="on-time">On Time</option>
            <option value="at-risk" data-i18n="at-risk">At Risk</option>
            <option value="delayed" data-i18n="delayed">Delayed</option>
          </select>
        </div>
        <div class="filter-group">
          <label class="filter-label" data-i18n="filter-carrier">Carrier</label>
          <select class="filter-select" id="filterCarrier">
            <option value="all" data-i18n="all-carriers">All Carriers</option>
            <option value="ghn">GHN</option>
            <option value="ghtk">GHTK</option>
            <option value="jt">J&T Express</option>
          </select>
        </div>
        <div class="filter-group">
          <label class="filter-label" data-i18n="filter-date-range">Date Range</label>
          <input type="date" class="filter-input" id="filterStartDate">
        </div>
        <div class="filter-group">
          <label class="filter-label" data-i18n="filter-to">To</label>
          <input type="date" class="filter-input" id="filterEndDate">
        </div>
        <div class="filter-group" style="display: flex; align-items: flex-end;">
          <button class="btn btn-primary" style="width: 100%;" onclick="applyFilters()">
            <span data-i18n="apply-filters">Apply Filters</span>
          </button>
        </div>
      </div>
    </div>

    <!-- KPI Grid -->
    <div class="kpi-grid">
      <div class="kpi-card success">
        <div class="kpi-header">
          <span class="kpi-title" data-i18n="total-orders-today">Total Orders Today</span>
          <div class="kpi-icon success">üì¶</div>
        </div>
        <div class="kpi-value" id="totalOrders">1,247</div>
        <div class="kpi-change positive">
          <span>‚Üë</span>
          <span data-i18n="increase-from-yesterday">12.5% from yesterday</span>
        </div>
      </div>

      <div class="kpi-card">
        <div class="kpi-header">
          <span class="kpi-title" data-i18n="sla-compliance">SLA Compliance</span>
          <div class="kpi-icon success">‚úì</div>
        </div>
        <div class="kpi-value" id="slaCompliance">96.8%</div>
        <div class="kpi-change positive">
          <span>‚Üë</span>
          <span data-i18n="improvement">2.3% improvement</span>
        </div>
      </div>

      <div class="kpi-card warning">
        <div class="kpi-header">
          <span class="kpi-title" data-i18n="orders-at-risk">Orders at Risk</span>
          <div class="kpi-icon warning">‚ö†Ô∏è</div>
        </div>
        <div class="kpi-value" id="ordersAtRisk">23</div>
        <div class="kpi-change negative">
          <span>‚Üë</span>
          <span data-i18n="more-than-usual">5 more than usual</span>
        </div>
      </div>

      <div class="kpi-card danger">
        <div class="kpi-header">
          <span class="kpi-title" data-i18n="delayed-orders">Delayed Orders</span>
          <div class="kpi-icon danger">‚è∞</div>
        </div>
        <div class="kpi-value" id="delayedOrders">7</div>
        <div class="kpi-change negative">
          <span>‚Üë</span>
          <span data-i18n="new-delays">3 new delays</span>
        </div>
      </div>
    </div>

    <!-- Main Grid -->
    <div class="main-grid">
      <!-- Order Status Section -->
      <div class="section-card">
        <div class="section-header">
          <h2 class="section-title" data-i18n="order-status-overview">Order Status Overview</h2>
          <div class="section-actions">
            <button class="btn btn-primary" onclick="refreshOrders()" data-i18n="refresh">Refresh</button>
          </div>
        </div>
        <table class="order-table">
          <thead>
            <tr>
              <th>Order ID</th>
              <th>Platform</th>
              <th>Status</th>
              <th>SLA Time</th>
              <th>Carrier</th>
            </tr>
          </thead>
          <tbody id="orderTableBody">
            <tr>
              <td>#ORD-2024-1247</td>
              <td><span class="platform-pill shopee">Shopee</span></td>
              <td><span class="status-badge on-time" data-i18n="on-time">On Time</span></td>
              <td>2h 15m <span data-i18n="remaining">remaining</span></td>
              <td>GHN</td>
            </tr>
            <tr>
              <td>#ORD-2024-1246</td>
              <td><span class="platform-pill tiktok">TikTok</span></td>
              <td><span class="status-badge at-risk" data-i18n="at-risk">At Risk</span></td>
              <td>45m <span data-i18n="remaining">remaining</span></td>
              <td>GHTK</td>
            </tr>
            <tr>
              <td>#ORD-2024-1245</td>
              <td><span class="platform-pill tiki">Tiki</span></td>
              <td><span class="status-badge delayed" data-i18n="delayed">Delayed</span></td>
              <td>-15m <span data-i18n="overdue">overdue</span></td>
              <td>J&T</td>
            </tr>
          </tbody>
        </table>
      </div>

      <!-- Alerts Section -->
      <div class="section-card">
        <div class="section-header">
          <h2 class="section-title" data-i18n="critical-alerts">Critical Alerts</h2>
          <span class="status-badge delayed">3 <span data-i18n="active">Active</span></span>
        </div>
        <div class="alert-list">
          <div class="alert-item critical">
            <span class="alert-icon">üö®</span>
            <div class="alert-content">
              <div class="alert-title" data-i18n="tiktok-sla-breach">TikTok SLA Breach Risk</div>
              <div class="alert-time" data-i18n="orders-approaching-deadline">5 orders approaching 72h deadline</div>
            </div>
          </div>
          <div class="alert-item warning">
            <span class="alert-icon">‚ö†Ô∏è</span>
            <div class="alert-content">
              <div class="alert-title" data-i18n="low-inventory">Low Inventory Alert</div>
              <div class="alert-time" data-i18n="sku-below-threshold">SKU #A123 below threshold (8 units)</div>
            </div>
          </div>
          <div class="alert-item critical">
            <span class="alert-icon">üö®</span>
            <div class="alert-content">
              <div class="alert-title" data-i18n="system-overload">System Overload Warning</div>
              <div class="alert-time" data-i18n="processing-capacity">Processing capacity at 92%</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Bottom Grid -->
    <div class="bottom-grid">
      <!-- Performance Chart -->
      <div class="section-card">
        <div class="section-header">
          <h2 class="section-title" data-i18n="sla-performance-trend">SLA Performance Trend</h2>
          <div class="section-actions">
            <select class="form-input" style="width: 150px;">
              <option data-i18n="last-7-days">Last 7 Days</option>
              <option data-i18n="last-30-days">Last 30 Days</option>
              <option data-i18n="last-quarter">Last Quarter</option>
            </select>
          </div>
        </div>
        <div class="chart-container">
          <div class="chart-placeholder">
            <canvas id="performanceChart"></canvas>
          </div>
        </div>
      </div>

      <!-- Carrier Performance -->
      <div class="section-card">
        <div class="section-header">
          <h2 class="section-title" data-i18n="carrier-performance">Carrier Performance</h2>
        </div>
        <div class="carrier-list">
          <div class="carrier-item">
            <div class="carrier-info">
              <div class="carrier-logo">GHN</div>
              <div>
                <div>Giao H√†ng Nhanh</div>
                <div class="carrier-label">423 <span data-i18n="deliveries-today">deliveries today</span></div>
              </div>
            </div>
            <div class="carrier-stats">
              <div class="carrier-rate">98.2%</div>
              <div class="carrier-label" data-i18n="on-time-rate">On-time rate</div>
            </div>
          </div>
          <div class="carrier-item">
            <div class="carrier-info">
              <div class="carrier-logo" style="background: #ea4335;">GHTK</div>
              <div>
                <div>Giao H√†ng Ti·∫øt Ki·ªám</div>
                <div class="carrier-label">312 <span data-i18n="deliveries-today">deliveries today</span></div>
              </div>
            </div>
            <div class="carrier-stats">
              <div class="carrier-rate">95.7%</div>
              <div class="carrier-label" data-i18n="on-time-rate">On-time rate</div>
            </div>
          </div>
          <div class="carrier-item">
            <div class="carrier-info">
              <div class="carrier-logo" style="background: #fbbc04;">J&T</div>
              <div>
                <div>J&T Express</div>
                <div class="carrier-label">287 <span data-i18n="deliveries-today">deliveries today</span></div>
              </div>
            </div>
            <div class="carrier-stats">
              <div class="carrier-rate">94.1%</div>
              <div class="carrier-label" data-i18n="on-time-rate">On-time rate</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Settings Modal -->
  <div class="modal" id="settingsModal">
    <div class="modal-content">
      <div class="modal-header">
        <h2 data-i18n="dashboard-settings">Dashboard Settings</h2>
        <span class="modal-close" onclick="closeSettings()">&times;</span>
      </div>
      <form id="settingsForm">
        <div class="form-group">
          <label class="form-label" data-i18n="api-endpoint">API Endpoint (One.tga.com.vn)</label>
          <input type="text" class="form-input" id="apiEndpoint" placeholder="https://api.one.tga.com.vn/v1">
        </div>
        <div class="form-group">
          <label class="form-label" data-i18n="google-sheet-id">Google Sheet ID (Logging)</label>
          <input type="text" class="form-input" id="sheetId" placeholder="1234567890abcdefghijklmnopqrstuvwxyz">
        </div>
        <div class="form-group">
          <label class="form-label" data-i18n="drive-folder-id">Drive Folder ID (Reports)</label>
          <input type="text" class="form-input" id="driveFolder" placeholder="folder_id_here">
        </div>
        <div class="form-group">
          <label class="form-label" data-i18n="refresh-interval">Refresh Interval (seconds)</label>
          <input type="number" class="form-input" id="refreshInterval" value="30" min="10" max="300">
        </div>
        <div class="form-group">
          <label class="form-label" data-i18n="alert-threshold">Alert Threshold (%)</label>
          <input type="number" class="form-input" id="alertThreshold" value="85" min="50" max="100">
        </div>
        <button type="submit" class="btn btn-primary" style="width: 100%;" data-i18n="save-settings">Save
          Settings</button>
      </form>
    </div>
  </div>

  <!-- Notification Popup -->
  <div class="notification-popup" id="notificationPopup">
    <div class="notification-header">
      <h3 class="notification-title" data-i18n="urgent-alert">‚ö†Ô∏è Urgent Alert</h3>
      <span class="notification-close" onclick="closeNotification()">√ó</span>
    </div>
    <div id="notificationContent"></div>
  </div>

  <!-- Toast Container -->
  <div class="toast-container" id="toastContainer"></div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
  <script>
    // Multi-language support
    const translations = {
      en: {
        'dashboard-title': 'Enterprise Warehouse Dashboard',
        'dashboard-subtitle': 'One.tga.com.vn - Realtime Operations Monitor',
        'sound-on': 'Sound ON',
        'sound-off': 'Sound OFF',
        'sync-active': 'Live Sync Active',
        'export': 'Export',
        'settings': 'Settings',
        'advanced-filters': 'Advanced Filters',
        'filter-platform': 'Platform',
        'filter-status': 'SLA Status',
        'filter-carrier': 'Carrier',
        'filter-date-range': 'Date Range',
        'filter-to': 'To',
        'apply-filters': 'Apply Filters',
        'all-platforms': 'All Platforms',
        'all-statuses': 'All Statuses',
        'all-carriers': 'All Carriers',
        'total-orders-today': 'Total Orders Today',
        'sla-compliance': 'SLA Compliance',
        'orders-at-risk': 'Orders at Risk',
        'delayed-orders': 'Delayed Orders',
        'increase-from-yesterday': '12.5% from yesterday',
        'improvement': '2.3% improvement',
        'more-than-usual': '5 more than usual',
        'new-delays': '3 new delays',
        'order-status-overview': 'Order Status Overview',
        'refresh': 'Refresh',
        'critical-alerts': 'Critical Alerts',
        'active': 'Active',
        'sla-performance-trend': 'SLA Performance Trend',
        'carrier-performance': 'Carrier Performance',
        'on-time-rate': 'On-time rate',
        'deliveries-today': 'deliveries today',
        'dashboard-settings': 'Dashboard Settings',
        'save-settings': 'Save Settings',
        'api-endpoint': 'API Endpoint',
        'google-sheet-id': 'Google Sheet ID (Logging)',
        'drive-folder-id': 'Drive Folder ID (Reports)',
        'refresh-interval': 'Refresh Interval (seconds)',
        'alert-threshold': 'Alert Threshold (%)',
        'urgent-alert': 'Urgent Alert',
        'new-critical-order': 'New critical order detected',
        'orders-need-attention': 'orders need immediate attention',
        'tiktok-sla-breach': 'TikTok SLA Breach Risk',
        'orders-approaching-deadline': '5 orders approaching 72h deadline',
        'low-inventory': 'Low Inventory Alert',
        'sku-below-threshold': 'SKU #A123 below threshold (8 units)',
        'system-overload': 'System Overload Warning',
        'processing-capacity': 'Processing capacity at 92%',
        'last-7-days': 'Last 7 Days',
        'last-30-days': 'Last 30 Days',
        'last-quarter': 'Last Quarter',
        'on-time': 'On Time',
        'at-risk': 'At Risk',
        'delayed': 'Delayed',
        'remaining': 'remaining',
        'overdue': 'overdue'
      },
      vi: {
        'dashboard-title': 'B·∫£ng ƒêi·ªÅu Khi·ªÉn Kho V·∫≠n',
        'dashboard-subtitle': 'One.tga.com.vn - Gi√°m S√°t V·∫≠n H√†nh Th·ªùi Gian Th·ª±c',
        'sound-on': 'B·∫≠t √Çm',
        'sound-off': 'T·∫Øt √Çm',
        'sync-active': 'ƒê·ªìng B·ªô Tr·ª±c Ti·∫øp',
        'export': 'Xu·∫•t B√°o C√°o',
        'settings': 'C√†i ƒê·∫∑t',
        'advanced-filters': 'B·ªô L·ªçc N√¢ng Cao',
        'filter-platform': 'N·ªÅn T·∫£ng',
        'filter-status': 'Tr·∫°ng Th√°i SLA',
        'filter-carrier': 'ƒê∆°n V·ªã V·∫≠n Chuy·ªÉn',
        'filter-date-range': 'Kho·∫£ng Th·ªùi Gian',
        'filter-to': 'ƒê·∫øn',
        'apply-filters': '√Åp D·ª•ng B·ªô L·ªçc',
        'all-platforms': 'T·∫•t C·∫£ N·ªÅn T·∫£ng',
        'all-statuses': 'T·∫•t C·∫£ Tr·∫°ng Th√°i',
        'all-carriers': 'T·∫•t C·∫£ ƒê∆°n V·ªã',
        'total-orders-today': 'T·ªïng ƒê∆°n H√†ng H√¥m Nay',
        'sla-compliance': 'Tu√¢n Th·ªß SLA',
        'orders-at-risk': 'ƒê∆°n H√†ng C√≥ R·ªßi Ro',
        'delayed-orders': 'ƒê∆°n H√†ng Tr·ªÖ',
        'increase-from-yesterday': 'TƒÉng 12.5% so v·ªõi h√¥m qua',
        'improvement': 'C·∫£i thi·ªán 2.3%',
        'more-than-usual': '5 ƒë∆°n nhi·ªÅu h∆°n b√¨nh th∆∞·ªùng',
        'new-delays': '3 ƒë∆°n tr·ªÖ m·ªõi',
        'order-status-overview': 'T·ªïng Quan Tr·∫°ng Th√°i ƒê∆°n H√†ng',
        'refresh': 'L√†m M·ªõi',
        'critical-alerts': 'C·∫£nh B√°o Quan Tr·ªçng',
        'active': 'ƒêang Ho·∫°t ƒê·ªông',
        'sla-performance-trend': 'Xu H∆∞·ªõng Hi·ªáu Su·∫•t SLA',
        'carrier-performance': 'Hi·ªáu Su·∫•t ƒê∆°n V·ªã V·∫≠n Chuy·ªÉn',
        'on-time-rate': 'T·ª∑ l·ªá ƒë√∫ng h·∫°n',
        'deliveries-today': 'giao h√†ng h√¥m nay',
        'dashboard-settings': 'C√†i ƒê·∫∑t B·∫£ng ƒêi·ªÅu Khi·ªÉn',
        'save-settings': 'L∆∞u C√†i ƒê·∫∑t',
        'api-endpoint': 'ƒêi·ªÉm Cu·ªëi API',
        'google-sheet-id': 'ID Google Sheet (Ghi Log)',
        'drive-folder-id': 'ID Th∆∞ M·ª•c Drive (B√°o C√°o)',
        'refresh-interval': 'Kho·∫£ng Th·ªùi Gian L√†m M·ªõi (gi√¢y)',
        'alert-threshold': 'Ng∆∞·ª°ng C·∫£nh B√°o (%)',
        'urgent-alert': 'C·∫£nh B√°o Kh·∫©n C·∫•p',
        'new-critical-order': 'Ph√°t hi·ªán ƒë∆°n h√†ng quan tr·ªçng m·ªõi',
        'orders-need-attention': 'ƒë∆°n h√†ng c·∫ßn x·ª≠ l√Ω ngay',
        'tiktok-sla-breach': 'Nguy C∆° Vi Ph·∫°m SLA TikTok',
        'orders-approaching-deadline': '5 ƒë∆°n h√†ng s·∫Øp ƒë·∫øn h·∫°n 72 gi·ªù',
        'low-inventory': 'C·∫£nh B√°o T·ªìn Kho Th·∫•p',
        'sku-below-threshold': 'SKU #A123 d∆∞·ªõi ng∆∞·ª°ng (8 ƒë∆°n v·ªã)',
        'system-overload': 'C·∫£nh B√°o Qu√° T·∫£i H·ªá Th·ªëng',
        'processing-capacity': 'C√¥ng su·∫•t x·ª≠ l√Ω ƒë·∫°t 92%',
        'last-7-days': '7 Ng√†y Qua',
        'last-30-days': '30 Ng√†y Qua',
        'last-quarter': 'Qu√Ω V·ª´a Qua',
        'on-time': 'ƒê√∫ng H·∫°n',
        'at-risk': 'C√≥ R·ªßi Ro',
        'delayed': 'ƒê√£ Tr·ªÖ',
        'remaining': 'c√≤n l·∫°i',
        'overdue': 'qu√° h·∫°n'
      }
    };

    let currentLang = 'en';
    let soundEnabled = true;
    let filters = {
      platform: 'all',
      status: 'all',
      carrier: 'all',
      startDate: null,
      endDate: null
    };

    // Audio for notifications
    const alertSound = new Audio('data:audio/wav;base64,UklGRvAVAABXQVZFZm10IBAAAAABAAEAESsAABErAAABAAgAZGF0YcwVAACAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA');

    // Configuration
    const config = {
      apiEndpoint: localStorage.getItem('apiEndpoint') || '',
      sheetId: localStorage.getItem('sheetId') || '',
      driveFolder: localStorage.getItem('driveFolder') || '',
      refreshInterval: parseInt(localStorage.getItem('refreshInterval') || '30'),
      alertThreshold: parseInt(localStorage.getItem('alertThreshold') || '85')
    };

    // Initialize Dashboard
    document.addEventListener('DOMContentLoaded', function () {
      initializeLanguage();
      initializeChart();
      startDataSync();
      loadSettings();
      initializeEventListeners();
      checkForCriticalAlerts();
    });

    // Language Management
    function initializeLanguage() {
      const savedLang = localStorage.getItem('dashboardLanguage') || 'en';
      setLanguage(savedLang);

      document.querySelectorAll('.lang-option').forEach(option => {
        option.addEventListener('click', function () {
          const lang = this.getAttribute('data-lang');
          setLanguage(lang);
        });
      });
    }

    function setLanguage(lang) {
      currentLang = lang;
      localStorage.setItem('dashboardLanguage', lang);

      document.querySelectorAll('.lang-option').forEach(option => {
        option.classList.toggle('active', option.getAttribute('data-lang') === lang);
      });

      document.querySelectorAll('[data-i18n]').forEach(element => {
        const key = element.getAttribute('data-i18n');
        if (translations[lang][key]) {
          element.textContent = translations[lang][key];
        }
      });
    }

    // Sound Toggle
    document.getElementById('soundToggle').addEventListener('click', function () {
      soundEnabled = !soundEnabled;
      const soundText = this.querySelector('span:last-child');
      soundText.textContent = translations[currentLang][soundEnabled ? 'sound-on' : 'sound-off'];
      this.querySelector('.sound-icon').textContent = soundEnabled ? 'üîî' : 'üîï';
      showToast(soundEnabled ? 'Sound notifications enabled' : 'Sound notifications disabled', 'info');
    });

    // Export Functions
    function toggleExportMenu() {
      const dropdown = document.getElementById('exportDropdown');
      dropdown.classList.toggle('show');
    }

    function exportToPDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      doc.setFontSize(20);
      doc.text('Warehouse Operations Report', 20, 20);

      doc.setFontSize(12);
      doc.text(`Generated: ${new Date().toLocaleString()}`, 20, 30);

      doc.setFontSize(14);
      doc.text('Summary Metrics', 20, 45);

      doc.setFontSize(12);
      doc.text(`Total Orders: ${document.getElementById('totalOrders').textContent}`, 20, 55);
      doc.text(`SLA Compliance: ${document.getElementById('slaCompliance').textContent}`, 20, 65);
      doc.text(`Orders at Risk: ${document.getElementById('ordersAtRisk').textContent}`, 20, 75);
      doc.text(`Delayed Orders: ${document.getElementById('delayedOrders').textContent}`, 20, 85);

      doc.save('warehouse-report.pdf');
      toggleExportMenu();
      showToast('PDF report generated successfully', 'success');
    }

    async function exportToExcel() {
      const workbook = XLSX.utils.book_new();

      const summaryData = [
        ['Metric', 'Value'],
        ['Total Orders', document.getElementById('totalOrders').textContent],
        ['SLA Compliance', document.getElementById('slaCompliance').textContent],
        ['Orders at Risk', document.getElementById('ordersAtRisk').textContent],
        ['Delayed Orders', document.getElementById('delayedOrders').textContent]
      ];

      const ordersData = getOrdersData();

      const summarySheet = XLSX.utils.aoa_to_sheet(summaryData);
      const ordersSheet = XLSX.utils.json_to_sheet(ordersData);

      XLSX.utils.book_append_sheet(workbook, summarySheet, 'Summary');
      XLSX.utils.book_append_sheet(workbook, ordersSheet, 'Orders');

      XLSX.writeFile(workbook, `warehouse-report-${new Date().toISOString().slice(0, 10)}.xlsx`);
      toggleExportMenu();
      showToast('Excel report exported successfully', 'success');
    }

    function exportToCSV() {
      const ordersData = getOrdersData();
      const csvContent = convertToCSV(ordersData);
      const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = `orders-export-${new Date().toISOString().slice(0, 10)}.csv`;
      link.click();
      toggleExportMenu();
      showToast('CSV data exported successfully', 'success');
    }

    function getOrdersData() {
      const rows = document.querySelectorAll('#orderTableBody tr');
      const data = [];
      rows.forEach(row => {
        data.push({
          orderId: row.cells[0].textContent,
          platform: row.cells[1].textContent,
          status: row.cells[2].textContent,
          slaTime: row.cells[3].textContent,
          carrier: row.cells[4].textContent
        });
      });
      return data;
    }

    function convertToCSV(data) {
      const headers = Object.keys(data[0]);
      const csv = [
        headers.join(','),
        ...data.map(row => headers.map(header => `"${row[header]}"`).join(','))
      ].join('\\n');
      return csv;
    }

    // Advanced Filtering
    function applyFilters() {
      filters.platform = document.getElementById('filterPlatform').value;
      filters.status = document.getElementById('filterStatus').value;
      filters.carrier = document.getElementById('filterCarrier').value;
      filters.startDate = document.getElementById('filterStartDate').value;
      filters.endDate = document.getElementById('filterEndDate').value;

      filterTableData();
      showToast('Filters applied successfully', 'success');
    }

    function filterTableData() {
      const rows = document.querySelectorAll('#orderTableBody tr');
      let visibleCount = 0;

      rows.forEach(row => {
        let show = true;

        if (filters.platform !== 'all') {
          const platform = row.cells[1].textContent.toLowerCase();
          if (!platform.includes(filters.platform)) show = false;
        }

        if (filters.status !== 'all') {
          const status = row.cells[2].textContent.toLowerCase();
          if (!status.includes(filters.status.replace('-', ' '))) show = false;
        }

        if (filters.carrier !== 'all') {
          const carrier = row.cells[4].textContent.toLowerCase();
          if (!carrier.includes(filters.carrier)) show = false;
        }

        row.style.display = show ? '' : 'none';
        if (show) visibleCount++;
      });

      updateFilteredCount(visibleCount);
    }

    function updateFilteredCount(count) {
      const totalRows = document.querySelectorAll('#orderTableBody tr').length;
      if (count < totalRows) {
        showToast(`Showing ${count} of ${totalRows} orders`, 'info');
      }
    }

    // Real-time Notifications
    function checkForCriticalAlerts() {
      setInterval(() => {
        const random = Math.random();
        if (random > 0.95) {
          const alerts = [
            {
              title: translations[currentLang]['urgent-alert'],
              message: translations[currentLang]['new-critical-order'],
              type: 'critical'
            },
            {
              title: translations[currentLang]['tiktok-sla-breach'],
              message: translations[currentLang]['orders-approaching-deadline'],
              type: 'warning'
            }
          ];

          const alert = alerts[Math.floor(Math.random() * alerts.length)];
          showNotification(alert.title, alert.message, alert.type);
        }
      }, 30000);
    }

    function showNotification(title, message, type = 'info') {
      const popup = document.getElementById('notificationPopup');
      const content = document.getElementById('notificationContent');

      content.innerHTML = `
                <p style="font-size: 16px; margin-bottom: 10px;">${message}</p>
                <p style="color: var(--text-secondary); font-size: 14px;">${new Date().toLocaleString()}</p>
                <button class="btn btn-primary" style="margin-top: 15px;" onclick="closeNotification()">Acknowledge</button>
            `;

      popup.style.display = 'block';

      if (soundEnabled && (type === 'critical' || type === 'warning')) {
        playAlertSound();
      }

      showToast(message, type === 'critical' ? 'error' : 'warning');
    }

    function closeNotification() {
      document.getElementById('notificationPopup').style.display = 'none';
    }

    function playAlertSound() {
      try {
        alertSound.play().catch(e => console.log('Audio play failed:', e));
      } catch (e) {
        console.log('Audio not supported');
      }
    }

    // Chart Initialization
    function initializeChart() {
      const ctx = document.getElementById('performanceChart').getContext('2d');
      const chart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
          datasets: [{
            label: 'Shopee',
            data: [98, 97, 96, 98, 97, 96, 97],
            borderColor: '#ee4d2d',
            tension: 0.4
          }, {
            label: 'TikTok',
            data: [95, 96, 94, 95, 96, 95, 96],
            borderColor: '#ff0050',
            tension: 0.4
          }, {
            label: 'Tiki',
            data: [97, 98, 97, 96, 97, 98, 97],
            borderColor: '#1ba8ff',
            tension: 0.4
          }]
        },
        options: {
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              labels: {
                color: '#a8a8b3'
              }
            }
          },
          scales: {
            y: {
              beginAtZero: false,
              min: 90,
              max: 100,
              ticks: {
                color: '#a8a8b3',
                callback: function (value) {
                  return value + '%';
                }
              },
              grid: {
                color: '#3a3a4e'
              }
            },
            x: {
              ticks: {
                color: '#a8a8b3'
              },
              grid: {
                color: '#3a3a4e'
              }
            }
          }
        }
      });
    }

    // Initialize Event Listeners
    function initializeEventListeners() {
      document.addEventListener('click', function (e) {
        if (!e.target.closest('.export-menu')) {
          document.getElementById('exportDropdown').classList.remove('show');
        }
      });

      window.addEventListener('keydown', function (e) {
        if (e.ctrlKey && e.key === 'e') {
          e.preventDefault();
          toggleExportMenu();
        }
      });
    }

    // Other existing functions remain the same...
    async function startDataSync() {
      await syncData();
      setInterval(syncData, config.refreshInterval * 1000);
    }

    async function syncData() {
      if (!config.apiEndpoint) {
        showToast('API endpoint not configured', 'error');
        return;
      }

      try {
        const data = await fetchDashboardData();
        updateDashboard(data);
        showToast('Data synced successfully', 'success');
      } catch (error) {
        console.error('Sync error:', error);
        showToast('Failed to sync data', 'error');
      }
    }

    async function fetchDashboardData() {
      return {
        totalOrders: Math.floor(Math.random() * 500) + 1000,
        slaCompliance: (Math.random() * 5 + 95).toFixed(1),
        ordersAtRisk: Math.floor(Math.random() * 30) + 10,
        delayedOrders: Math.floor(Math.random() * 10) + 2
      };
    }

    function updateDashboard(data) {
      animateValue('totalOrders', data.totalOrders);
      animateValue('slaCompliance', data.slaCompliance + '%');
      animateValue('ordersAtRisk', data.ordersAtRisk);
      animateValue('delayedOrders', data.delayedOrders);
    }

    function animateValue(id, value) {
      const element = document.getElementById(id);
      element.style.opacity = '0.5';
      setTimeout(() => {
        element.textContent = value;
        element.style.opacity = '1';
      }, 200);
    }

    function openSettings() {
      document.getElementById('settingsModal').style.display = 'flex';
    }

    function closeSettings() {
      document.getElementById('settingsModal').style.display = 'none';
    }

    function loadSettings() {
      document.getElementById('apiEndpoint').value = config.apiEndpoint;
      document.getElementById('sheetId').value = config.sheetId;
      document.getElementById('driveFolder').value = config.driveFolder;
      document.getElementById('refreshInterval').value = config.refreshInterval;
      document.getElementById('alertThreshold').value = config.alertThreshold;
    }

    document.getElementById('settingsForm').addEventListener('submit', function (e) {
      e.preventDefault();

      config.apiEndpoint = document.getElementById('apiEndpoint').value;
      config.sheetId = document.getElementById('sheetId').value;
      config.driveFolder = document.getElementById('driveFolder').value;
      config.refreshInterval = parseInt(document.getElementById('refreshInterval').value);
      config.alertThreshold = parseInt(document.getElementById('alertThreshold').value);

      Object.keys(config).forEach(key => {
        localStorage.setItem(key, config[key]);
      });

      showToast('Settings saved successfully', 'success');
      closeSettings();
      startDataSync();
    });

    function showToast(message, type = 'info') {
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.innerHTML = `
                <span>${type === 'success' ? '‚úì' : '‚ö†Ô∏è'}</span>
                <span>${message}</span>
            `;

      document.getElementById('toastContainer').appendChild(toast);

      setTimeout(() => {
        toast.style.opacity = '0';
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }

    function refreshOrders() {
      const button = event.target;
      button.innerHTML = '<span class="loading"></span>';
      button.disabled = true;

      setTimeout(() => {
        button.innerHTML = translations[currentLang]['refresh'];
        button.disabled = false;
        showToast('Orders refreshed', 'success');
        filterTableData();
      }, 1500);
    }

    function updateOrderStatus(orderId, status) {
      const rows = document.querySelectorAll('#orderTableBody tr');
      rows.forEach(row => {
        if (row.cells[0].textContent === orderId) {
          const statusBadge = row.querySelector('.status-badge');
          statusBadge.className = `status-badge ${status}`;
          statusBadge.textContent = status.replace('-', ' ').toUpperCase();
        }
      });
    }

    document.addEventListener('keydown', function (e) {
      if (e.ctrlKey && e.key === 's') {
        e.preventDefault();
        openSettings();
      }
      if (e.key === 'Escape') {
        closeSettings();
        closeNotification();
      }
    });

    setInterval(() => {
      const random = Math.random();
      if (random > 0.7) {
        const orders = ['#ORD-2024-1247', '#ORD-2024-1246', '#ORD-2024-1245'];
        const statuses = ['on-time', 'at-risk', 'delayed'];
        const randomOrder = orders[Math.floor(Math.random() * orders.length)];
        const randomStatus = statuses[Math.floor(Math.random() * statuses.length)];
        updateOrderStatus(randomOrder, randomStatus);
      }
    }, 5000);
  </script>
</body>

</html>
